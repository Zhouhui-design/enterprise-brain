-- 示例业务数据
-- 用于演示和测试的样例数据
-- 创建时间：2024-11-27

-- =================
-- 示例产品数据
-- =================

-- 插入示例产品分类的产品
INSERT IGNORE INTO `product` (`product_code`, `product_name`, `product_spec`, `category_id`, `unit`, `standard_price`, `cost_price`, `min_stock`, `max_stock`, `description`, `status`, `created_time`, `created_by`) VALUES
-- 金属材料产品
('P0001001', '优质钢板', 'Q235B 10mm*1000mm*2000mm', 5, '张', 350.00, 300.00, 50, 500, '优质碳素结构钢板，用于机械制造', 1, NOW(), 1),
('P0001002', '不锈钢管', '304 Φ32*3mm', 5, '米', 85.00, 70.00, 100, 800, '304不锈钢管，耐腐蚀性能优异', 1, NOW(), 1),
('P0001003', '铝合金板', '6061-T6 5mm*1000mm*2000mm', 5, '张', 120.00, 100.00, 30, 300, '高强度铝合金板材', 1, NOW(), 1),

-- 塑料材料产品  
('P0002001', 'ABS工程塑料', '颗粒状 25kg/袋', 6, '袋', 18.50, 15.00, 20, 200, '高品质ABS工程塑料颗粒', 1, NOW(), 1),
('P0002002', 'PVC管材', 'DN50 国标', 6, '米', 12.80, 10.00, 50, 500, 'PVC给水管材，符合国家标准', 1, NOW(), 1),
('P0002003', '聚乙烯薄膜', '0.05mm*1000mm', 6, '米', 3.20, 2.50, 500, 2000, '食品级聚乙烯薄膜', 1, NOW(), 1),

-- 成品产品
('P0003001', '机械零部件A', '精密加工件', 3, '个', 580.00, 420.00, 10, 100, '精密机械零部件，公差±0.01mm', 1, NOW(), 1),
('P0003002', '电子控制器', 'MCU控制器模块', 3, '个', 1250.00, 900.00, 5, 50, '工业级电子控制器模块', 1, NOW(), 1),
('P0003003', '组装产品X', '多部件组装产品', 3, '套', 2800.00, 2000.00, 2, 20, '复杂组装产品，包含多个子部件', 1, NOW(), 1);

-- =================
-- 示例客户数据
-- =================

-- 插入示例客户
INSERT IGNORE INTO `customer` (`customer_code`, `customer_name`, `customer_type`, `contact_person`, `contact_phone`, `contact_email`, `address`, `credit_limit`, `payment_terms`, `status`, `created_time`, `created_by`) VALUES
('C0001', '华东机械制造有限公司', 2, '张经理', '13800001001', 'zhang@hdmachine.com', '上海市浦东新区工业园区88号', 500000.00, '月结30天', 1, NOW(), 1),
('C0002', '广州精密设备厂', 2, '李主任', '13800001002', 'li@gzprecision.com', '广州市天河区科技园北路168号', 300000.00, '月结60天', 1, NOW(), 1),
('C0003', '北京科技发展集团', 2, '王总', '13800001003', 'wang@bjtech.com', '北京市海淀区中关村大街100号', 1000000.00, '月结90天', 1, NOW(), 1),
('C0004', '深圳创新电子科技', 2, '陈工程师', '13800001004', 'chen@szinnovation.com', '深圳市南山区高新技术园区5号楼', 600000.00, '货到付款', 1, NOW(), 1),
('C0005', '杭州智能制造有限公司', 2, '刘部长', '13800001005', 'liu@hzsmart.com', '杭州市滨江区网商路699号', 400000.00, '月结30天', 1, NOW(), 1);

-- =================
-- 示例供应商数据
-- =================

-- 插入示例供应商
INSERT IGNORE INTO `supplier` (`supplier_code`, `supplier_name`, `contact_person`, `contact_phone`, `contact_email`, `address`, `payment_terms`, `quality_grade`, `status`, `created_time`, `created_by`) VALUES
('S0001', '中原钢铁集团', '赵主管', '13900001001', 'zhao@zygt.com', '河南省郑州市中原区钢铁大道188号', '月结30天', 'A', 1, NOW(), 1),
('S0002', '江南化工材料厂', '钱经理', '13900001002', 'qian@jnhg.com', '江苏省南京市化工园区创新路66号', '预付款', 'B', 1, NOW(), 1),
('S0003', '华北塑料制品公司', '孙总监', '13900001003', 'sun@hbsl.com', '河北省石家庄市高新区塑料工业园8号', '货到付款', 'A', 1, NOW(), 1),
('S0004', '东莞电子元器件批发', '周采购', '13900001004', 'zhou@dgdz.com', '广东省东莞市长安镇电子城A区15栋', '月结60天', 'C', 1, NOW(), 1),
('S0005', '青岛精密加工中心', '吴技术', '13900001005', 'wu@qdjm.com', '山东省青岛市城阳区加工园区北路28号', '分期付款', 'A', 1, NOW(), 1);

-- =================
-- 示例销售订单数据
-- =================

-- 插入示例销售订单
INSERT IGNORE INTO `sales_order` (`order_no`, `customer_id`, `order_date`, `delivery_date`, `total_amount`, `discount_amount`, `tax_amount`, `final_amount`, `order_status`, `remarks`, `created_time`, `created_by`) VALUES
('SO20241101001', 1, '2024-11-01', '2024-11-15', 15800.00, 200.00, 2028.00, 17628.00, 2, '紧急订单，优先生产', NOW(), 1),
('SO20241102001', 2, '2024-11-02', '2024-11-20', 8500.00, 0.00, 1105.00, 9605.00, 2, '标准订单', NOW(), 1),
('SO20241103001', 3, '2024-11-03', '2024-12-01', 28000.00, 1000.00, 3510.00, 30510.00, 1, '大额订单，需要审批', NOW(), 1),
('SO20241104001', 4, '2024-11-04', '2024-11-25', 12600.00, 300.00, 1599.00, 13899.00, 3, '生产中，进度正常', NOW(), 1),
('SO20241105001', 5, '2024-11-05', '2024-11-30', 7200.00, 0.00, 936.00, 8136.00, 2, '批量订单，分批交付', NOW(), 1);

-- 插入销售订单明细
INSERT IGNORE INTO `sales_order_item` (`order_id`, `product_id`, `quantity`, `unit_price`, `discount_rate`, `line_amount`, `delivery_date`, `remarks`, `created_time`) VALUES
-- SO20241101001 的明细
(1, 7, 5, 580.00, 0.0500, 2755.00, '2024-11-15', '精密加工，质量要求高', NOW()),
(1, 8, 10, 1250.00, 0.0400, 12000.00, '2024-11-15', '电子产品，防静电包装', NOW()),

-- SO20241102001 的明细  
(2, 1, 20, 350.00, 0.0000, 7000.00, '2024-11-20', '标准钢板', NOW()),
(2, 3, 10, 120.00, 0.0000, 1200.00, '2024-11-20', '铝合金板材', NOW()),

-- SO20241103001 的明细
(3, 9, 10, 2800.00, 0.0357, 27000.00, '2024-12-01', '大型组装产品，需要专用包装', NOW()),

-- SO20241104001 的明细
(4, 7, 15, 580.00, 0.0000, 8700.00, '2024-11-25', '批量生产，统一交付', NOW()),
(4, 8, 3, 1250.00, 0.0400, 3600.00, '2024-11-25', '配套电控产品', NOW()),

-- SO20241105001 的明细
(5, 2, 80, 85.00, 0.0000, 6800.00, '2024-11-30', '不锈钢管材，分批交付', NOW()),
(5, 4, 20, 18.50, 0.0000, 370.00, '2024-11-30', 'ABS塑料颗粒', NOW());

-- =================
-- 示例采购订单数据
-- =================

-- 插入示例采购订单
INSERT IGNORE INTO `purchase_order` (`order_no`, `supplier_id`, `order_date`, `expected_date`, `total_amount`, `tax_amount`, `final_amount`, `order_status`, `remarks`, `created_time`, `created_by`) VALUES
('PO20241101001', 1, '2024-11-01', '2024-11-10', 18000.00, 2340.00, 20340.00, 2, '钢材原料采购', NOW(), 1),
('PO20241102001', 3, '2024-11-02', '2024-11-12', 5600.00, 728.00, 6328.00, 3, '塑料原料补库存', NOW(), 1),
('PO20241103001', 2, '2024-11-03', '2024-11-15', 8200.00, 1066.00, 9266.00, 2, '化工材料采购', NOW(), 1),
('PO20241104001', 5, '2024-11-04', '2024-11-18', 12500.00, 1625.00, 14125.00, 1, '精密加工外协', NOW(), 1),
('PO20241105001', 4, '2024-11-05', '2024-11-20', 3200.00, 416.00, 3616.00, 4, '电子元器件采购，已到货', NOW(), 1);

-- 插入采购订单明细
INSERT IGNORE INTO `purchase_order_item` (`order_id`, `product_id`, `quantity`, `unit_price`, `line_amount`, `received_quantity`, `expected_date`, `remarks`, `created_time`) VALUES
-- PO20241101001 的明细
(1, 1, 50, 300.00, 15000.00, 0.00, '2024-11-10', '优质钢板原料', NOW()),
(1, 2, 40, 70.00, 2800.00, 0.00, '2024-11-10', '不锈钢管材', NOW()),

-- PO20241102001 的明细
(2, 4, 200, 15.00, 3000.00, 120.00, '2024-11-12', 'ABS塑料颗粒，已部分到货', NOW()),
(2, 5, 200, 10.00, 2000.00, 200.00, '2024-11-12', 'PVC管材，已全部到货', NOW()),

-- PO20241103001 的明细
(3, 6, 1000, 2.50, 2500.00, 0.00, '2024-11-15', '聚乙烯薄膜', NOW()),

-- PO20241104001 的明细  
(4, 7, 20, 420.00, 8400.00, 0.00, '2024-11-18', '外协精密加工零部件', NOW()),

-- PO20241105001 的明细
(5, 8, 4, 900.00, 3600.00, 4.00, '2024-11-20', '电子控制器模块，已到货', NOW());

-- =================
-- 示例库存数据
-- =================

-- 插入示例库存记录
INSERT IGNORE INTO `inventory` (`warehouse_id`, `product_id`, `on_hand_qty`, `available_qty`, `allocated_qty`, `reserved_qty`, `last_in_date`, `last_out_date`, `avg_cost`, `created_time`) VALUES
-- 原料仓库库存
(1, 1, 180.0000, 130.0000, 50.0000, 0.0000, '2024-11-05', '2024-11-03', 302.50, NOW()),
(1, 2, 320.0000, 240.0000, 80.0000, 0.0000, '2024-11-05', '2024-11-04', 72.30, NOW()),
(1, 3, 85.0000, 75.0000, 10.0000, 0.0000, '2024-11-04', '2024-11-02', 98.80, NOW()),
(1, 4, 380.0000, 360.0000, 20.0000, 0.0000, '2024-11-06', '2024-11-05', 15.20, NOW()),
(1, 5, 450.0000, 400.0000, 50.0000, 0.0000, '2024-11-05', '2024-11-04', 10.30, NOW()),
(1, 6, 1200.0000, 1000.0000, 200.0000, 0.0000, '2024-11-03', '2024-11-01', 2.60, NOW()),

-- 成品仓库库存
(2, 7, 25.0000, 10.0000, 15.0000, 0.0000, '2024-11-04', '2024-11-05', 425.00, NOW()),
(2, 8, 18.0000, 15.0000, 3.0000, 0.0000, '2024-11-06', '2024-11-04', 905.50, NOW()),
(2, 9, 8.0000, 8.0000, 0.0000, 0.0000, '2024-11-02', '2024-10-28', 2050.00, NOW()),

-- 半成品仓库库存
(3, 7, 40.0000, 25.0000, 15.0000, 0.0000, '2024-11-05', '2024-11-06', 420.00, NOW()),
(3, 8, 12.0000, 9.0000, 3.0000, 0.0000, '2024-11-04', '2024-11-05', 900.00, NOW());

-- =================
-- 示例库存事务记录
-- =================

-- 插入示例库存事务
INSERT IGNORE INTO `inventory_transaction` (`transaction_no`, `warehouse_id`, `product_id`, `transaction_type`, `quantity`, `unit_cost`, `reference_type`, `reference_id`, `transaction_date`, `remarks`, `created_time`, `created_by`) VALUES
('INV20241101001', 1, 1, 1, 50.0000, 300.00, 'purchase_order', 1, '2024-11-01', '采购入库-钢板', NOW(), 1),
('INV20241101002', 1, 2, 1, 40.0000, 70.00, 'purchase_order', 1, '2024-11-01', '采购入库-不锈钢管', NOW(), 1),
('INV20241102001', 1, 4, 1, 200.0000, 15.00, 'purchase_order', 2, '2024-11-02', '采购入库-ABS塑料', NOW(), 1),
('INV20241102002', 1, 5, 1, 200.0000, 10.00, 'purchase_order', 2, '2024-11-02', '采购入库-PVC管材', NOW(), 1),
('INV20241103001', 2, 7, 1, 20.0000, 420.00, 'production', 1, '2024-11-03', '生产入库-机械零部件', NOW(), 1),
('INV20241103002', 1, 1, 2, -20.0000, 300.00, 'production', 1, '2024-11-03', '生产领料-钢板', NOW(), 1),
('INV20241104001', 2, 8, 1, 10.0000, 900.00, 'purchase_order', 5, '2024-11-04', '采购入库-电子控制器', NOW(), 1),
('INV20241104002', 2, 7, 2, -5.0000, 420.00, 'sales_order', 1, '2024-11-04', '销售出库-机械零部件', NOW(), 1),
('INV20241105001', 1, 2, 2, -80.0000, 70.00, 'sales_order', 5, '2024-11-05', '销售出库-不锈钢管', NOW(), 1),
('INV20241105002', 3, 7, 3, 15.0000, 420.00, 'transfer', NULL, '2024-11-05', '仓库调拨-成品到半成品仓', NOW(), 1);

-- =================
-- 示例生产任务数据
-- =================

-- 插入示例生产任务
INSERT IGNORE INTO `production_task` (`task_no`, `task_name`, `product_id`, `order_id`, `planned_quantity`, `completed_quantity`, `quality_quantity`, `defect_quantity`, `planned_start_date`, `planned_end_date`, `actual_start_date`, `actual_end_date`, `task_status`, `priority`, `assigned_workers`, `work_center`, `equipment`, `remarks`, `created_time`, `created_by`) VALUES
('PT20241101001', '机械零部件A生产任务', 7, 1, 20.0000, 20.0000, 19.0000, 1.0000, '2024-11-01', '2024-11-05', '2024-11-01', '2024-11-04', 3, 2, '["工人001","工人002","工人003"]', 'WC001-精密加工中心', 'CNC-001,CNC-002', '已完成生产，质量良好', NOW(), 1),
('PT20241102001', '电子控制器组装任务', 8, 1, 15.0000, 8.0000, 8.0000, 0.0000, '2024-11-02', '2024-11-08', '2024-11-02', NULL, 2, 1, '["工人004","工人005"]', 'WC002-电子组装线', 'ASM-001', '进行中，预计按时完成', NOW(), 1),
('PT20241103001', '组装产品X制造任务', 9, 3, 10.0000, 0.0000, 0.0000, 0.0000, '2024-11-10', '2024-11-25', NULL, NULL, 1, 1, '["工人001","工人003","工人006","工人007"]', 'WC003-总装车间', 'ASM-002,ASM-003', '待开始，大型产品组装', NOW(), 1),
('PT20241104001', '钢板预处理任务', 1, NULL, 100.0000, 100.0000, 100.0000, 0.0000, '2024-11-01', '2024-11-02', '2024-11-01', '2024-11-02', 3, 3, '["工人008","工人009"]', 'WC004-预处理车间', 'CUT-001,CLEAN-001', '钢板切割和清洁处理完成', NOW(), 1),
('PT20241105001', '不锈钢管加工任务', 2, NULL, 50.0000, 30.0000, 30.0000, 0.0000, '2024-11-03', '2024-11-06', '2024-11-03', NULL, 2, 2, '["工人010"]', 'WC005-管材加工', 'PIPE-001', '管材加工中，进度正常', NOW(), 1);

-- =================
-- 示例考勤数据
-- =================

-- 插入示例考勤记录（最近一周）
INSERT IGNORE INTO `attendance_record` (`user_id`, `attendance_date`, `check_in_time`, `check_out_time`, `check_in_location`, `check_out_location`, `work_hours`, `overtime_hours`, `late_minutes`, `early_leave_minutes`, `attendance_status`, `remarks`, `created_time`) VALUES
-- 用户1的考勤记录
(1, '2024-11-20', '2024-11-20 08:58:00', '2024-11-20 18:05:00', '生产区A栋', '生产区A栋', 8.12, 0.08, 0, 0, 1, '正常考勤', NOW()),
(1, '2024-11-21', '2024-11-21 09:08:00', '2024-11-21 18:00:00', '生产区A栋', '生产区A栋', 7.87, 0.00, 8, 0, 2, '轻微迟到', NOW()),
(1, '2024-11-22', '2024-11-22 08:55:00', '2024-11-22 18:30:00', '生产区A栋', '生产区A栋', 8.58, 0.50, 0, 0, 1, '正常考勤，有加班', NOW()),
(1, '2024-11-25', '2024-11-25 09:00:00', '2024-11-25 18:00:00', '生产区A栋', '生产区A栋', 8.00, 0.00, 0, 0, 1, '正常考勤', NOW()),
(1, '2024-11-26', '2024-11-26 09:02:00', '2024-11-26 17:45:00', '生产区A栋', '生产区A栋', 7.72, 0.00, 2, 15, 3, '早退', NOW()),

-- 用户2的考勤记录
(2, '2024-11-20', '2024-11-20 08:45:00', '2024-11-20 18:10:00', '办公楼', '办公楼', 8.42, 0.17, 0, 0, 1, '正常考勤', NOW()),
(2, '2024-11-21', '2024-11-21 09:15:00', '2024-11-21 18:00:00', '办公楼', '办公楼', 7.75, 0.00, 15, 0, 2, '迟到', NOW()),
(2, '2024-11-22', '2024-11-22 08:50:00', '2024-11-22 19:00:00', '办公楼', '办公楼', 9.17, 1.00, 0, 0, 1, '加班处理紧急任务', NOW()),
(2, '2024-11-25', '2024-11-25 09:00:00', '2024-11-25 18:00:00', '办公楼', '办公楼', 8.00, 0.00, 0, 0, 1, '正常考勤', NOW()),
(2, '2024-11-26', '2024-11-26 08:58:00', '2024-11-26 18:02:00', '办公楼', '办公楼', 8.07, 0.03, 0, 0, 1, '正常考勤', NOW());