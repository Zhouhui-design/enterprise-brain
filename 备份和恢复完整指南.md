# ä¼ä¸šå¤§è„‘ç³»ç»Ÿ - å¤‡ä»½å’Œæ¢å¤å®Œæ•´æŒ‡å—

## ğŸ“¦ å¤‡ä»½è„šæœ¬æ€»è§ˆ

### 1. **backup-push-with-retry.bat** - å®Œæ•´å¤‡ä»½æ¨é€ï¼ˆæ¨èï¼‰
**åŠŸèƒ½**ï¼š
- âœ… å¤‡ä»½æ‰€æœ‰æ•°æ®åº“æ–‡ä»¶ï¼ˆå¸¦æ—¶é—´æˆ³+æœ€æ–°ç‰ˆï¼‰
- âœ… å¤‡ä»½é…ç½®æ–‡ä»¶
- âœ… å¤‡ä»½ä¾èµ–æ¸…å•ï¼ˆpackage.jsonï¼‰
- âœ… è‡ªåŠ¨æ›´æ–°.gitignore
- âœ… æäº¤åˆ°Git
- âœ… æ¨é€åˆ°è¿œç¨‹ï¼ˆ3æ¬¡é‡è¯•æœºåˆ¶ï¼‰
- âœ… åˆ›å»ºæ¢å¤æŒ‡å—

**ä½¿ç”¨åœºæ™¯**ï¼šé‡å¤§æ›´æ–°å‰ã€æ¯æ—¥å¤‡ä»½ã€å‘å¸ƒå‰

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
backup-push-with-retry.bat
```

---

### 2. **auto-backup-push.bat** - å¿«é€Ÿè‡ªåŠ¨å¤‡ä»½
**åŠŸèƒ½**ï¼š
- âœ… å¿«é€Ÿå¤‡ä»½æ•°æ®åº“ï¼ˆä»…æœ€æ–°ç‰ˆï¼‰
- âœ… å¤‡ä»½ä¾èµ–æ¸…å•
- âœ… è‡ªåŠ¨æäº¤å¹¶æ¨é€
- âœ… æ— éœ€ç¡®è®¤ï¼Œå…¨è‡ªåŠ¨

**ä½¿ç”¨åœºæ™¯**ï¼šæ—¥å¸¸å¼€å‘ã€å¿«é€Ÿä¿å­˜

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
auto-backup-push.bat
```

---

### 3. **quick-restore.bat** - å¿«é€Ÿæ¢å¤
**åŠŸèƒ½**ï¼š
- âœ… ä»è¿œç¨‹æ‹‰å–æœ€æ–°ä»£ç 
- âœ… æ¢å¤æ•°æ®åº“æ–‡ä»¶
- âœ… æ¢å¤é…ç½®æ–‡ä»¶
- âœ… è‡ªåŠ¨å®‰è£…ä¾èµ–
- âœ… æ¸…ç†ç¼“å­˜

**ä½¿ç”¨åœºæ™¯**ï¼šç³»ç»Ÿé‡è£…ã€è¿ç§»ã€æ•…éšœæ¢å¤

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
quick-restore.bat
```

---

## ğŸ—‚ï¸ å¤‡ä»½ç›®å½•ç»“æ„

```
enterprise-brain/
â”œâ”€â”€ full-backup/
â”‚   â”œâ”€â”€ databases/                      # æ•°æ®åº“å¤‡ä»½
â”‚   â”‚   â”œâ”€â”€ enterprise_brain_latest.db  # ä¸»æ•°æ®åº“ï¼ˆæœ€æ–°ï¼‰
â”‚   â”‚   â”œâ”€â”€ enterprise_latest.db        # åç«¯æ•°æ®åº“ï¼ˆæœ€æ–°ï¼‰
â”‚   â”‚   â”œâ”€â”€ enterprise_brain_YYYYMMDD_HHMMSS.db  # æ—¶é—´æˆ³ç‰ˆæœ¬
â”‚   â”‚   â””â”€â”€ enterprise_YYYYMMDD_HHMMSS.db        # æ—¶é—´æˆ³ç‰ˆæœ¬
â”‚   â”œâ”€â”€ config/                         # é…ç½®æ–‡ä»¶å¤‡ä»½
â”‚   â”‚   â””â”€â”€ database.js
â”‚   â”œâ”€â”€ backend-package.json            # åç«¯ä¾èµ–
â”‚   â”œâ”€â”€ frontend-package.json           # å‰ç«¯ä¾èµ–
â”‚   â””â”€â”€ README-RECOVERY.md              # æ¢å¤æŒ‡å—
â”œâ”€â”€ start-all-services.bat              # å¯åŠ¨æœåŠ¡
â”œâ”€â”€ stop-all-services.bat               # åœæ­¢æœåŠ¡
â”œâ”€â”€ restart-services.bat                # é‡å¯æœåŠ¡
â”œâ”€â”€ check-services.bat                  # æ£€æŸ¥çŠ¶æ€
â”œâ”€â”€ diagnose-startup-issues.bat         # è¯Šæ–­é—®é¢˜
â”œâ”€â”€ backup-push-with-retry.bat          # å®Œæ•´å¤‡ä»½
â”œâ”€â”€ auto-backup-push.bat                # å¿«é€Ÿå¤‡ä»½
â””â”€â”€ quick-restore.bat                   # å¿«é€Ÿæ¢å¤
```

---

## ğŸš€ å®Œæ•´æ¢å¤æµç¨‹

### åœºæ™¯1: ç³»ç»Ÿé‡è£…/æ–°ç”µè„‘è¿ç§»

#### æ­¥éª¤1: å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/Zhouhui-design/enterprise-brain.git
cd enterprise-brain
```

#### æ­¥éª¤2: è¿è¡Œå¿«é€Ÿæ¢å¤
```bash
quick-restore.bat
```

#### æ­¥éª¤3: å¯åŠ¨æœåŠ¡
```bash
start-all-services.bat
```

#### æ­¥éª¤4: éªŒè¯
è®¿é—®: http://localhost:3003

---

### åœºæ™¯2: æ‰‹åŠ¨æ¢å¤ï¼ˆæ— è„šæœ¬ï¼‰

#### æ­¥éª¤1: å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/Zhouhui-design/enterprise-brain.git
cd enterprise-brain
```

#### æ­¥éª¤2: æ¢å¤æ•°æ®åº“
```bash
# åˆ›å»ºç›®å½•
mkdir data
mkdir backend\database

# å¤åˆ¶æ•°æ®åº“
copy full-backup\databases\enterprise_brain_latest.db data\enterprise_brain.db
copy full-backup\databases\enterprise_latest.db backend\database\enterprise.db
```

#### æ­¥éª¤3: å®‰è£…ä¾èµ–
```bash
# åç«¯
cd backend
npm install

# å‰ç«¯
cd ../07-frontend
npm install
```

#### æ­¥éª¤4: å¯åŠ¨æœåŠ¡
```bash
# åç«¯
cd ../backend
start cmd /k "node server.js"

# å‰ç«¯
cd ../07-frontend
start cmd /k "npm run dev"
```

---

## ğŸ“‹ å¤‡ä»½æœ€ä½³å®è·µ

### æ—¥å¸¸å¼€å‘
```bash
# æ¯æ¬¡é‡å¤§ä¿®æ”¹å
auto-backup-push.bat

# æˆ–ä½¿ç”¨å¿«æ·é”®/å®šæ—¶ä»»åŠ¡
```

### é‡è¦æ›´æ–°å‰
```bash
# å®Œæ•´å¤‡ä»½
backup-push-with-retry.bat
```

### å‘å¸ƒå‰
```bash
# 1. å®Œæ•´å¤‡ä»½
backup-push-with-retry.bat

# 2. æµ‹è¯•æ¢å¤ï¼ˆåœ¨å¦ä¸€ä¸ªç›®å½•ï¼‰
git clone https://github.com/Zhouhui-design/enterprise-brain.git test-recovery
cd test-recovery
quick-restore.bat
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1: æ¨é€å¤±è´¥ï¼ˆç½‘ç»œé—®é¢˜ï¼‰
**ç°è±¡**: "Failed to connect to github.com"

**è§£å†³**:
```bash
# æ–¹æ³•1: æ£€æŸ¥ç½‘ç»œ
ping github.com

# æ–¹æ³•2: ä½¿ç”¨ä»£ç†ï¼ˆå¦‚æœæœ‰ï¼‰
git config --global http.proxy http://127.0.0.1:7890

# æ–¹æ³•3: ç¨åæ‰‹åŠ¨æ¨é€
git push -f origin main
```

---

### é—®é¢˜2: æ•°æ®åº“æ–‡ä»¶æœªå¤‡ä»½
**ç°è±¡**: "æœªæ‰¾åˆ°æ•°æ®åº“æ–‡ä»¶"

**è§£å†³**:
```bash
# æ£€æŸ¥æ•°æ®åº“ä½ç½®
dir data\*.db
dir backend\database\*.db

# æ‰‹åŠ¨å¤åˆ¶åˆ°å¤‡ä»½ç›®å½•
copy data\enterprise_brain.db full-backup\databases\
```

---

### é—®é¢˜3: æ¢å¤åæ— æ³•å¯åŠ¨
**ç°è±¡**: æœåŠ¡å¯åŠ¨å¤±è´¥

**è§£å†³**:
```bash
# 1. è¯Šæ–­é—®é¢˜
diagnose-startup-issues.bat

# 2. é‡æ–°å®‰è£…ä¾èµ–
cd backend
npm cache clean --force
npm install

cd ../07-frontend
npm cache clean --force
npm install

# 3. é‡æ–°å¯åŠ¨
start-all-services.bat
```

---

## ğŸ“Š å¤‡ä»½å†…å®¹æ¸…å•

### âœ… å·²å¤‡ä»½å†…å®¹
- [x] æºä»£ç ï¼ˆæ‰€æœ‰.js, .vue, .tsæ–‡ä»¶ï¼‰
- [x] æ•°æ®åº“æ–‡ä»¶ï¼ˆSQLite .dbæ–‡ä»¶ï¼‰
- [x] é…ç½®æ–‡ä»¶ï¼ˆbackend/config/ï¼‰
- [x] ä¾èµ–æ¸…å•ï¼ˆpackage.json + package-lock.jsonï¼‰
- [x] æœåŠ¡ç®¡ç†è„šæœ¬ï¼ˆ.batæ–‡ä»¶ï¼‰
- [x] æ¢å¤æŒ‡å—æ–‡æ¡£

### âŒ ä¸å¤‡ä»½å†…å®¹ï¼ˆå¯é‡æ–°ç”Ÿæˆï¼‰
- [ ] node_modulesï¼ˆé€šè¿‡npm installæ¢å¤ï¼‰
- [ ] distï¼ˆé€šè¿‡npm run buildç”Ÿæˆï¼‰
- [ ] æ—¥å¿—æ–‡ä»¶ï¼ˆ*.logï¼‰
- [ ] ä¸´æ—¶æ–‡ä»¶ï¼ˆ*.tmpï¼‰
- [ ] ç¼“å­˜ï¼ˆ.vite, .cacheç­‰ï¼‰

---

## ğŸ” æ•°æ®å®‰å…¨

### æœ¬åœ°å¤‡ä»½
- **ä½ç½®**: `full-backup/databases/`
- **ç‰ˆæœ¬**: æ—¶é—´æˆ³ç‰ˆæœ¬ + æœ€æ–°ç‰ˆæœ¬
- **é¢‘ç‡**: æ¯æ¬¡è¿è¡Œå¤‡ä»½è„šæœ¬

### è¿œç¨‹å¤‡ä»½
- **ä½ç½®**: GitHubä»“åº“
- **åœ°å€**: https://github.com/Zhouhui-design/enterprise-brain.git
- **åˆ†æ”¯**: main
- **è®¿é—®**: éœ€è¦Gitè®¤è¯

---

## âš¡ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### å¤‡ä»½
```bash
backup-push-with-retry.bat    # å®Œæ•´å¤‡ä»½ï¼ˆå¸¦é‡è¯•ï¼‰
auto-backup-push.bat           # å¿«é€Ÿå¤‡ä»½
```

### æ¢å¤
```bash
quick-restore.bat              # è‡ªåŠ¨æ¢å¤
```

### æœåŠ¡ç®¡ç†
```bash
start-all-services.bat         # å¯åŠ¨
stop-all-services.bat          # åœæ­¢
restart-services.bat           # é‡å¯
check-services.bat             # æ£€æŸ¥
diagnose-startup-issues.bat    # è¯Šæ–­
```

### Gitæ“ä½œ
```bash
git pull origin main           # æ‹‰å–æœ€æ–°
git push -f origin main        # å¼ºåˆ¶æ¨é€
git status                     # æŸ¥çœ‹çŠ¶æ€
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¤‡ä»½ç›¸å…³é—®é¢˜
1. æŸ¥çœ‹ `full-backup/README-RECOVERY.md`
2. è¿è¡Œ `diagnose-startup-issues.bat` è¯Šæ–­
3. æ£€æŸ¥å¤‡ä»½ç›®å½•æ˜¯å¦å­˜åœ¨æ–‡ä»¶

### æ¢å¤ç›¸å…³é—®é¢˜
1. ç¡®ä¿å·²å…‹éš†æœ€æ–°ä»£ç 
2. ç¡®ä¿æ•°æ®åº“æ–‡ä»¶å·²å¤åˆ¶åˆ°æ­£ç¡®ä½ç½®
3. ç¡®ä¿å·²å®‰è£…æ‰€æœ‰ä¾èµ–

### ç´§æ€¥è”ç³»
- é‚®ä»¶: support@example.com
- æ–‡æ¡£: https://github.com/Zhouhui-design/enterprise-brain/wiki

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### 2025-12-29
- âœ… åˆ›å»ºå®Œæ•´å¤‡ä»½æ¨é€è„šæœ¬ï¼ˆå¸¦é‡è¯•ï¼‰
- âœ… åˆ›å»ºå¿«é€Ÿæ¢å¤è„šæœ¬
- âœ… æ›´æ–°.gitignoreå…è®¸å¤‡ä»½ç›®å½•
- âœ… æ·»åŠ è¯¦ç»†çš„æ¢å¤æŒ‡å—

---

## ğŸ¯ è®°ä½è¿™äº›

1. **æ¯æ¬¡é‡è¦ä¿®æ”¹å**: è¿è¡Œ `auto-backup-push.bat`
2. **æ¯å¤©ç»“æŸå‰**: è¿è¡Œ `backup-push-with-retry.bat`
3. **å‘å¸ƒå‰**: å®Œæ•´å¤‡ä»½ + æµ‹è¯•æ¢å¤
4. **ç³»ç»Ÿé‡è£…**: è¿è¡Œ `quick-restore.bat`
5. **é‡åˆ°é—®é¢˜**: å…ˆè¿è¡Œ `diagnose-startup-issues.bat`

---

**è®°ä½ï¼šå¤‡ä»½æ˜¯ä¸ºäº†å®‰å¿ƒï¼Œæ¢å¤æ˜¯ä¸ºäº†ç»§ç»­å‰è¿›ï¼** ğŸš€
