# 需求描述

## 需求场景
用户反馈系统中的生产BOM和物料管理存在严重问题，需要紧急修复三个关键问题：
1. 生产BOM页面中的材料单价必须严格使用基础单价（base_price），没有则默认为0或不填
2. 物料管理页面的物料来源字段显示问题 - 显示为数组而不是可读的字符串
3. 基础单价的自动生成逻辑需要确保正确性

## 问题分析

### 问题1：生产BOM材料单价使用错误
- **位置**：07-frontend/src/pages/bom/ProductionBom.vue
- **现象**：材料单价字段没有严格使用基础单价，存在降级到采购单价的错误逻辑
- **关键要求**：
  - 材料单价必须使用基础单价（base_price）
  - 没有基础单价则默认为0或不填
  - 不允许降级到采购单价
  - 材料和人工是分开的，不是每个子件都有材料单价

### 问题2：物料来源字段显示问题
- **位置**：07-frontend/src/pages/material/MaterialList.vue
- **现象**：物料来源字段显示为数组格式，无法直观查看
- **影响**：用户体验差，信息展示不友好

### 问题3：基础单价自动生成逻辑
- **位置**：backend/services/materialService.js
- **现象**：基础单价自动生成逻辑可能存在问题
- **关键要求**：
  - 基础单价必须是自动生成的
  - 只要有采购单价，就应该自动计算基础单价
  - 确保基础单价的计算逻辑正确

## 核心业务逻辑
1. **基础单价自动生成**：物料管理中，只要有采购单价（purchase_price），系统就应该自动计算基础单价（base_price）
2. **生产BOM材料单价**：必须严格使用基础单价，不允许使用采购单价作为备选
3. **材料与人工分离**：生产BOM中的子件可能只有人工单价，也可能只有材料单价，两者是独立的
4. **无基础单价处理**：如果没有基础单价，材料单价字段应该为0或不填，不能使用采购单价

## 修复优先级
1. **高优先级**：生产BOM材料单价严格使用基础单价（核心业务逻辑）
2. **高优先级**：基础单价自动生成逻辑优化（数据源头修复）
3. **中优先级**：物料来源字段显示问题（用户体验）

## 预期成果
1. 生产BOM页面严格使用基础单价，无基础单价时显示0或空白
2. 物料管理页面确保基础单价自动生成逻辑正确
3. 物料管理页面正确显示物料来源
4. 材料与人工费用计算分离，业务逻辑清晰
