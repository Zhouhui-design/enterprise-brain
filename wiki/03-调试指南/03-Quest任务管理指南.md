# Quest任务管理指南

## 🎯 Quest是什么

Quest是QODER IDE左侧菜单的任务管理功能，可以帮助您：
- 📝 创建和追踪开发任务
- 🐛 记录BUG排查过程
- 📊 管理项目待办事项
- 📖 保存技术笔记
- 🔄 追踪任务状态

## 📚 基础操作

### 1. 打开Quest面板

1. 在QODER IDE左侧菜单栏找到"Quest"图标（📋）
2. 点击图标打开Quest面板
3. 面板会显示所有任务列表

### 2. 创建新任务

#### 方法1：通过按钮
1. 点击"New Quest"或"+"按钮
2. 输入任务标题
3. 选择任务类型：
   - Feature（新功能）
   - Bug（错误修复）
   - Task（任务）
   - Note（笔记）
4. 添加任务描述
5. 点击"Create"创建

#### 方法2：通过右键菜单
1. 在文件浏览器中右键点击文件
2. 选择"Create Quest from file"
3. 自动关联该文件到任务

### 3. 管理任务状态

任务有以下状态：
- 📋 **TODO**：待处理
- 🔄 **IN PROGRESS**：进行中
- ✅ **DONE**：已完成
- ❌ **CANCELLED**：已取消

**状态切换**：
- 点击任务卡片左侧的状态图标
- 或在任务详情中更改状态

### 4. 添加任务详情

点击任务进入详情页，可以添加：
- **Description**：任务描述
- **Steps**：执行步骤
- **Files**：关联文件
- **Notes**：补充笔记
- **Tags**：标签分类

## 🔧 实战案例

### 案例1：BUG排查任务

#### 创建BUG任务
```
标题：真工序计划 - 计划开始日期未生成
类型：Bug
优先级：High
```

#### 添加描述
```markdown
## 问题描述
真工序计划的计划开始日期字段未按规则生成

## 预期结果
计划开始日期 = 2025-12-31

## 实际结果
计划开始日期 = null

## 环境
- 页面：真工序计划列表
- 浏览器：Chrome 120
- 后端版本：1.0.0
```

#### 添加排查步骤
```markdown
## 排查步骤

### 1. 检查前端日志
- [x] 打开浏览器Console
- [x] 查看计算日志
- 发现：API调用返回null

### 2. 检查后端日志
- [x] tail -f backend.log
- 发现：SQL查询返回0条记录

### 3. 检查数据库数据
- [x] 查询工序能力负荷表
- 发现：剩余工时数据不足

### 4. 验证计算逻辑
- [ ] 手动累加计算
- [ ] 对比后端累加结果
```

#### 关联文件
```
- 07-frontend/src/pages/production-planning/RealProcessPlanList.vue
- backend/routes/capacityLoad.js
- wiki/03-调试指南/01-真工序计划调试指南.md
```

#### 添加解决方案
```markdown
## 解决方案

### 问题根源
工序能力负荷表中剩余工时不足，无法累加到需求工时

### 修复措施
1. 补充工序能力负荷表数据
2. 调整剩余工时门槛值
3. 验证计算逻辑

### 验证结果
- [x] 计划开始日期正确生成：2025-12-31
- [x] 累加工时符合预期：12.5小时
```

### 案例2：功能开发任务

#### 创建Feature任务
```
标题：工序计划 - 添加自动排程功能
类型：Feature
优先级：Medium
```

#### 拆解子任务
```markdown
## 开发计划

### 阶段1：需求分析
- [ ] 阅读业务规则文档
- [ ] 确认计算公式
- [ ] 设计数据库字段

### 阶段2：后端开发
- [ ] 创建API接口
- [ ] 实现计算逻辑
- [ ] 编写单元测试

### 阶段3：前端开发
- [ ] 添加触发按钮
- [ ] 调用后端API
- [ ] 更新UI显示

### 阶段4：测试验证
- [ ] 功能测试
- [ ] 性能测试
- [ ] 更新Wiki文档
```

### 案例3：技术笔记任务

#### 创建Note任务
```
标题：工序能力负荷表 - 累加计算逻辑笔记
类型：Note
```

#### 添加笔记内容
```markdown
## 累加计算逻辑

### 业务规则
从计划结束日期向前累加剩余工时，直到累计工时 >= 需求工时

### 代码实现
```javascript
let accumulatedHours = 0
for (let i = 0; i < rows.length; i++) {
  accumulatedHours += parseFloat(rows[i].remaining_hours)
  if (accumulatedHours >= required) {
    return rows[i].date
  }
}
```

### 注意事项
1. 日期必须倒序排列（DESC）
2. 剩余工时必须 > 门槛值
3. 需要处理累加不足的情况

### 相关Wiki
- [真工序计划计算规则](wiki/01-数据流规则/03-真工序计划计算规则.md)
```

## 📊 任务组织策略

### 1. 使用标签分类

**建议标签**：
- `frontend` - 前端相关
- `backend` - 后端相关
- `database` - 数据库相关
- `urgent` - 紧急
- `documentation` - 文档
- `performance` - 性能优化
- `refactor` - 重构

**示例**：
```
任务：优化工序能力负荷表查询性能
标签：backend, database, performance
```

### 2. 优先级管理

**优先级定义**：
- 🔴 **Critical**：系统崩溃、数据丢失
- 🟠 **High**：核心功能不可用
- 🟡 **Medium**：功能异常但有替代方案
- 🟢 **Low**：优化建议、文档完善

**示例**：
```
Critical: 销售订单删除失败
High: 计划开始日期未生成
Medium: 页面加载速度慢
Low: 添加快捷键
```

### 3. 任务分组

**按模块分组**：
```
📁 生产计划模块
  ├─ 真工序计划功能开发
  ├─ 备料计划BUG修复
  └─ 主生产计划优化

📁 工序能力负荷
  ├─ 累加计算逻辑优化
  ├─ 数据同步功能
  └─ 性能优化

📁 文档完善
  ├─ Wiki文档编写
  ├─ API文档更新
  └─ 使用手册
```

## 🎓 高级技巧

### 1. 任务模板

创建常用任务模板，提高效率：

#### BUG排查模板
```markdown
## 问题描述
（描述问题的具体表现）

## 复现步骤
1. 步骤1
2. 步骤2
3. 步骤3

## 预期结果
（应该出现什么结果）

## 实际结果
（实际出现什么结果）

## 环境信息
- 页面路径：
- 浏览器：
- 后端版本：

## 排查记录
### 检查前端
- [ ] Console日志
- [ ] Network请求
- [ ] 断点调试

### 检查后端
- [ ] 后端日志
- [ ] API响应
- [ ] 数据库查询

### 检查数据
- [ ] 数据库记录
- [ ] 数据格式
- [ ] 数据完整性

## 解决方案
（记录修复措施）

## 验证结果
（记录测试结果）
```

### 2. 关联Wiki文档

在任务中引用Wiki文档：
```markdown
## 相关文档
- [真工序计划计算规则](../wiki/01-数据流规则/03-真工序计划计算规则.md)
- [真工序计划调试指南](../wiki/03-调试指南/01-真工序计划调试指南.md)
```

### 3. 任务依赖

标注任务之间的依赖关系：
```markdown
## 依赖任务
- 需要完成 #12（数据库迁移）
- 需要完成 #15（API接口开发）

## 被依赖
- #20（前端UI开发）依赖本任务
```

### 4. 时间追踪

记录任务耗时：
```markdown
## 时间记录
- 2025-12-11 10:00-11:30：需求分析（1.5h）
- 2025-12-11 14:00-17:00：代码实现（3h）
- 2025-12-11 17:00-17:30：测试验证（0.5h）

总耗时：5小时
```

## 📋 Quest工作流程

### 日常开发流程

```
1. 早上打开Quest → 查看待办任务
2. 选择优先级最高的任务 → 切换为IN PROGRESS
3. 开始开发 → 在任务中记录进展
4. 遇到问题 → 创建BUG任务
5. 完成功能 → 切换为DONE
6. 更新Wiki文档 → 关联到任务
7. 下班前回顾 → 计划明天的任务
```

### BUG修复流程

```
1. 发现BUG → 创建Bug类型任务
2. 添加复现步骤 → 确认问题
3. 查看Wiki → 确认业务规则
4. 使用调试指南 → 排查问题
5. 记录排查过程 → 在任务中更新
6. 实施修复 → 验证结果
7. 更新Wiki → 添加到常见问题
8. 关闭任务 → 切换为DONE
```

## 💡 最佳实践

### 1. 任务命名规范
```
✅ 好的命名：
- 真工序计划 - 修复计划开始日期计算BUG
- 工序能力负荷表 - 优化查询性能
- 销售订单 - 添加批量导入功能

❌ 不好的命名：
- 修复BUG
- 优化性能
- 新功能
```

### 2. 及时更新状态
- 开始工作时立即切换为IN PROGRESS
- 完成后立即切换为DONE
- 不要积累大量未更新的任务

### 3. 详细记录过程
- 记录关键决策和原因
- 记录遇到的问题和解决方法
- 记录学到的新知识

### 4. 定期回顾
- 每周回顾已完成的任务
- 总结经验教训
- 更新Wiki文档

### 5. 与团队协作
- 清晰的任务描述
- 及时的状态更新
- 完善的文档关联

## 🔗 与其他工具集成

### 1. 与仓库Wiki集成

在Quest任务中引用Wiki：
```markdown
参考文档：
- [wiki/01-数据流规则/03-真工序计划计算规则.md](../wiki/01-数据流规则/03-真工序计划计算规则.md)
```

在Wiki中引用Quest任务：
```markdown
相关任务：
- Quest #25：真工序计划计算规则实现
```

### 2. 与测试功能集成

在Quest任务中记录测试：
```markdown
## 测试计划
1. 单元测试：queryPlanStartDate()
2. 集成测试：完整数据流
3. 性能测试：1000条记录查询

## 测试结果
- [x] 所有单元测试通过
- [x] 集成测试通过
- [x] 性能测试：平均200ms
```

### 3. 与运行调试集成

在Quest任务中记录调试：
```markdown
## 调试记录
1. 设置断点：RealProcessPlanList.vue:509
2. 查看变量：requiredWorkHours = 10.5
3. 单步执行：发现日期格式问题
4. 修复验证：功能正常
```

## 📖 快速参考

### Quest快捷键（如果支持）
| 操作 | 快捷键 |
|------|--------|
| 新建任务 | Ctrl+N |
| 搜索任务 | Ctrl+F |
| 切换状态 | Space |
| 标记完成 | Ctrl+Enter |

### 任务状态流转
```
TODO → IN PROGRESS → DONE
  ↓          ↓
CANCELLED  CANCELLED
```

---

**最后更新**：2025-12-11  
**维护者**：开发团队  
**相关文档**：
- [使用浏览器断点调试](./02-使用浏览器断点调试.md)
- [真工序计划调试指南](./01-真工序计划调试指南.md)
