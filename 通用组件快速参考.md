# ğŸ“– é€šç”¨ç»„ä»¶å¿«é€Ÿå‚è€ƒæŒ‡å—

**æ›´æ–°æ—¶é—´ï¼š** 2025-12-03

---

## ğŸ¯ ç»„ä»¶é€‰æ‹©å†³ç­–æ ‘

```
éœ€è¦è¡¨æ ¼åŠŸèƒ½ï¼Ÿ
â”œâ”€ æ˜¯
â”‚  â”œâ”€ éœ€è¦å®Œæ•´åŠŸèƒ½ï¼ˆå¢åˆ æ”¹æŸ¥/å¯¼å…¥å¯¼å‡º/ç­›é€‰æ’åº/ç»Ÿè®¡ï¼‰ï¼Ÿ
â”‚  â”‚  â””â”€ ä½¿ç”¨ EnhancedTable.vue âœ… (æ¨è)
â”‚  â”‚
â”‚  â”œâ”€ éœ€è¦è¯¦ç»†ç­›é€‰ï¼ˆå¤šæ¡ä»¶/å¤šç±»å‹ï¼‰ï¼Ÿ
â”‚  â”‚  â””â”€ ä½¿ç”¨ FilterTable.vue
â”‚  â”‚
â”‚  â”œâ”€ éœ€è¦è¡Œå†…ç¼–è¾‘ï¼Ÿ
â”‚  â”‚  â””â”€ ä½¿ç”¨ EditableTable.vue
â”‚  â”‚
â”‚  â”œâ”€ æ ‘å½¢å±‚çº§æ•°æ®ï¼Ÿ
â”‚  â”‚  â””â”€ ä½¿ç”¨ TreeTable.vue
â”‚  â”‚
â”‚  â”œâ”€ è¶…è¿‡1000è¡Œæ•°æ®ï¼Ÿ
â”‚  â”‚  â””â”€ ä½¿ç”¨ VirtualTable.vue
â”‚  â”‚
â”‚  â””â”€ ç®€å•æ•°æ®å±•ç¤ºï¼ˆæ— å¤æ‚åŠŸèƒ½ï¼‰ï¼Ÿ
â”‚     â””â”€ ä½¿ç”¨ BaseTable.vue
â”‚
â””â”€ å¦
   â”œâ”€ éœ€è¦è¡¨å•ï¼Ÿ
   â”‚  â”œâ”€ å¤šæ­¥éª¤è¡¨å• â†’ StepForm.vue
   â”‚  â”œâ”€ åŠ¨æ€è¡¨å• â†’ DynamicForm.vue
   â”‚  â”œâ”€ æœç´¢è¡¨å• â†’ SearchForm.vue
   â”‚  â””â”€ ç®€å•è¡¨å• â†’ BaseForm.vue
   â”‚
   â””â”€ éœ€è¦å…¶ä»–åŠŸèƒ½
      â”œâ”€ ç­›é€‰é¢æ¿ â†’ FilterPanel.vue
      â””â”€ æ‰¹é‡æ“ä½œ â†’ BatchOperation.vue
```

---

## âš¡ EnhancedTable å¿«é€Ÿä½¿ç”¨

### æœ€ç®€å•ç”¨æ³•

```vue
<template>
  <EnhancedTable
    :data="tableData"
    :columns="columns"
  />
</template>

<script setup>
import EnhancedTable from '@/components/common/EnhancedTable.vue'

const tableData = ref([
  { id: 1, name: 'å¼ ä¸‰', amount: 1000 },
  { id: 2, name: 'æå››', amount: 2000 }
])

const columns = ref([
  { prop: 'id', label: 'ID', width: 80 },
  { prop: 'name', label: 'å§“å', minWidth: 150 },
  { prop: 'amount', label: 'é‡‘é¢', width: 120 }
])
</script>
```

### å¸¦æ‰€æœ‰åŠŸèƒ½

```vue
<template>
  <EnhancedTable
    :data="tableData"
    :columns="columns"
    :loading="loading"
    :total="total"
    :page="currentPage"
    :page-size="pageSize"
    :show-summary="true"
    :summary-data="summaryData"
    :summary-columns="summaryColumns"
    @add="handleAdd"
    @edit="handleEdit"
    @delete="handleBatchDelete"
    @delete-single="handleDeleteSingle"
    @export="handleExport"
    @import="handleImport"
    @refresh="handleRefresh"
    @page-change="handlePageChange"
    @size-change="handleSizeChange"
  >
    <!-- è‡ªå®šä¹‰åˆ— -->
    <template #column-status="{ row }">
      <el-tag :type="row.status === 'active' ? 'success' : 'info'">
        {{ row.status }}
      </el-tag>
    </template>
  </EnhancedTable>
</template>
```

---

## ğŸ“Š åˆ—é…ç½®é€ŸæŸ¥

```javascript
const columns = ref([
  {
    prop: 'fieldName',        // å­—æ®µåï¼ˆå¿…å¡«ï¼‰
    label: 'æ˜¾ç¤ºåç§°',        // åˆ—æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰
    width: 120,               // å›ºå®šå®½åº¦
    minWidth: 150,            // æœ€å°å®½åº¦
    sortable: true,           // å¯æ’åº
    filterable: true,         // å¯ç­›é€‰
    fixed: 'left',            // å›ºå®šåˆ— 'left' | 'right'
    align: 'center',          // å¯¹é½ 'left' | 'center' | 'right'
    format: (val) => val      // æ ¼å¼åŒ–å‡½æ•°
  }
])
```

---

## ğŸ“ˆ ç»Ÿè®¡é…ç½®é€ŸæŸ¥

```javascript
// è®¡ç®—ç»Ÿè®¡æ•°æ®
const summaryData = computed(() => ({
  totalAmount: tableData.value.reduce((sum, row) => sum + row.amount, 0),
  avgAmount: tableData.value.reduce((sum, row) => sum + row.amount, 0) / tableData.value.length,
  count: tableData.value.length
}))

// ç»Ÿè®¡åˆ—é…ç½®
const summaryColumns = ref([
  { prop: 'totalAmount', label: 'æ€»é‡‘é¢', type: 'money' },
  { prop: 'avgAmount', label: 'å¹³å‡é‡‘é¢', type: 'money' },
  { prop: 'count', label: 'è®°å½•æ•°' }
])
```

---

## ğŸ¨ å¸¸ç”¨æ’æ§½

```vue
<template>
  <EnhancedTable :data="data" :columns="columns">
    <!-- å·¥å…·æ å·¦ä¾§è‡ªå®šä¹‰æŒ‰é’® -->
    <template #toolbar-left>
      <el-button type="primary">è‡ªå®šä¹‰æŒ‰é’®</el-button>
    </template>

    <!-- è‡ªå®šä¹‰åˆ—å†…å®¹ -->
    <template #column-status="{ row, index }">
      <el-tag>{{ row.status }}</el-tag>
    </template>

    <!-- è‡ªå®šä¹‰æ“ä½œåˆ— -->
    <template #operation="{ row, index }">
      <el-button size="small" @click="handleEdit(row)">ç¼–è¾‘</el-button>
      <el-button size="small" type="danger" @click="handleDelete(row)">åˆ é™¤</el-button>
    </template>
  </EnhancedTable>
</template>
```

---

## âš™ï¸ Propsé…ç½®é€ŸæŸ¥

| Props | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|-------|------|--------|------|
| data | Array | [] | è¡¨æ ¼æ•°æ® |
| columns | Array | - | åˆ—é…ç½®ï¼ˆå¿…å¡«ï¼‰ |
| loading | Boolean | false | åŠ è½½çŠ¶æ€ |
| total | Number | 0 | æ€»æ•° |
| page | Number | 1 | å½“å‰é¡µ |
| pageSize | Number | 20 | æ¯é¡µå¤§å° |
| showToolbar | Boolean | true | æ˜¾ç¤ºå·¥å…·æ  |
| showAdd | Boolean | true | æ˜¾ç¤ºæ–°å¢ |
| showExport | Boolean | true | æ˜¾ç¤ºå¯¼å‡º |
| showImport | Boolean | true | æ˜¾ç¤ºå¯¼å…¥ |
| showPrint | Boolean | true | æ˜¾ç¤ºæ‰“å° |
| showFilter | Boolean | true | æ˜¾ç¤ºç­›é€‰ |
| showSummary | Boolean | false | æ˜¾ç¤ºç»Ÿè®¡ |
| summaryData | Object | {} | ç»Ÿè®¡æ•°æ® |
| summaryColumns | Array | [] | ç»Ÿè®¡åˆ— |

---

## ğŸ¯ Eventsäº‹ä»¶é€ŸæŸ¥

| äº‹ä»¶ | å‚æ•° | è¯´æ˜ |
|------|------|------|
| add | - | ç‚¹å‡»æ–°å¢ |
| edit | row | ç‚¹å‡»ç¼–è¾‘ |
| delete | rows | æ‰¹é‡åˆ é™¤ |
| delete-single | row | åˆ é™¤å•æ¡ |
| export | - | å¯¼å‡ºæ•°æ® |
| import | - | å¯¼å…¥æ•°æ® |
| refresh | - | åˆ·æ–°æ•°æ® |
| page-change | page | é¡µç å˜åŒ– |
| size-change | size | æ¯é¡µå¤§å°å˜åŒ– |
| selection-change | selection | é€‰æ‹©å˜åŒ– |
| sort-change | { prop, order } | æ’åºå˜åŒ– |

---

## ğŸ“± å®æˆ˜ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šè´¢åŠ¡æŠ¥è¡¨

```vue
<template>
  <EnhancedTable
    :data="reportData"
    :columns="columns"
    :show-summary="true"
    :summary-data="summaryData"
    :summary-columns="summaryColumns"
  >
    <template #column-amount="{ row }">
      <span :class="row.amount < 0 ? 'text-red' : 'text-green'">
        Â¥{{ row.amount.toFixed(2) }}
      </span>
    </template>
  </EnhancedTable>
</template>

<script setup>
const columns = ref([
  { prop: 'date', label: 'æ—¥æœŸ', width: 120, sortable: true },
  { prop: 'category', label: 'ç±»åˆ«', minWidth: 100, filterable: true },
  { prop: 'amount', label: 'é‡‘é¢', width: 150, sortable: true }
])

const summaryData = computed(() => ({
  totalIncome: reportData.value.filter(r => r.amount > 0).reduce((sum, r) => sum + r.amount, 0),
  totalExpense: Math.abs(reportData.value.filter(r => r.amount < 0).reduce((sum, r) => sum + r.amount, 0)),
  netProfit: reportData.value.reduce((sum, r) => sum + r.amount, 0)
}))

const summaryColumns = ref([
  { prop: 'totalIncome', label: 'æ€»æ”¶å…¥', type: 'money' },
  { prop: 'totalExpense', label: 'æ€»æ”¯å‡º', type: 'money' },
  { prop: 'netProfit', label: 'å‡€åˆ©æ¶¦', type: 'money' }
])
</script>
```

### ç¤ºä¾‹2ï¼šé‡‡è´­è®¢å•

```vue
<template>
  <EnhancedTable
    :data="orders"
    :columns="columns"
    :loading="loading"
    :total="total"
    @add="handleCreateOrder"
    @export="handleExportOrders"
  >
    <template #column-status="{ row }">
      <el-tag :type="statusColors[row.status]">
        {{ statusLabels[row.status] }}
      </el-tag>
    </template>

    <template #operation="{ row }">
      <el-button size="small" @click="handleView(row)">æŸ¥çœ‹</el-button>
      <el-button size="small" type="primary" @click="handleApprove(row)" v-if="row.status === 'pending'">
        å®¡æ‰¹
      </el-button>
    </template>
  </EnhancedTable>
</template>

<script setup>
const columns = ref([
  { prop: 'orderNo', label: 'è®¢å•å·', width: 150, filterable: true },
  { prop: 'supplier', label: 'ä¾›åº”å•†', minWidth: 150, filterable: true },
  { prop: 'amount', label: 'é‡‘é¢', width: 120, sortable: true },
  { prop: 'orderDate', label: 'è®¢å•æ—¥æœŸ', width: 120, sortable: true },
  { prop: 'status', label: 'çŠ¶æ€', width: 100, filterable: true }
])

const statusColors = {
  pending: 'warning',
  approved: 'success',
  rejected: 'danger'
}

const statusLabels = {
  pending: 'å¾…å®¡æ‰¹',
  approved: 'å·²é€šè¿‡',
  rejected: 'å·²æ‹’ç»'
}
</script>
```

### ç¤ºä¾‹3ï¼šåº“å­˜ç®¡ç†

```vue
<template>
  <EnhancedTable
    :data="inventory"
    :columns="columns"
    :show-summary="true"
    :summary-data="summaryData"
    :summary-columns="summaryColumns"
  >
    <template #column-stock="{ row }">
      <span :class="getStockClass(row.stock, row.minStock)">
        {{ row.stock }}
      </span>
    </template>
  </EnhancedTable>
</template>

<script setup>
const columns = ref([
  { prop: 'productCode', label: 'äº§å“ç¼–ç ', width: 120, filterable: true },
  { prop: 'productName', label: 'äº§å“åç§°', minWidth: 150, filterable: true },
  { prop: 'stock', label: 'åº“å­˜', width: 100, sortable: true },
  { prop: 'minStock', label: 'æœ€ä½åº“å­˜', width: 100 },
  { prop: 'unit', label: 'å•ä½', width: 80 }
])

const getStockClass = (stock, minStock) => {
  if (stock <= 0) return 'text-red'
  if (stock <= minStock) return 'text-warning'
  return 'text-green'
}

const summaryData = computed(() => ({
  totalProducts: inventory.value.length,
  lowStock: inventory.value.filter(i => i.stock <= i.minStock).length,
  outOfStock: inventory.value.filter(i => i.stock <= 0).length
}))

const summaryColumns = ref([
  { prop: 'totalProducts', label: 'æ€»äº§å“æ•°' },
  { prop: 'lowStock', label: 'ä½åº“å­˜' },
  { prop: 'outOfStock', label: 'ç¼ºè´§' }
])
</script>
```

---

## ğŸ¨ æ ·å¼å®šåˆ¶

```vue
<style scoped>
.text-red {
  color: #f56c6c;
  font-weight: bold;
}

.text-green {
  color: #67c23a;
  font-weight: bold;
}

.text-warning {
  color: #e6a23c;
  font-weight: bold;
}
</style>
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. åˆ—é…ç½®ç®¡ç†

```javascript
// æ¨èï¼šé›†ä¸­ç®¡ç†åˆ—é…ç½®
const COLUMN_CONFIGS = {
  common: [
    { prop: 'id', label: 'ID', width: 80 },
    { prop: 'createTime', label: 'åˆ›å»ºæ—¶é—´', width: 180, sortable: true }
  ],
  order: [
    { prop: 'orderNo', label: 'è®¢å•å·', width: 150, filterable: true },
    { prop: 'amount', label: 'é‡‘é¢', width: 120, sortable: true }
  ]
}

const columns = ref([...COLUMN_CONFIGS.order, ...COLUMN_CONFIGS.common])
```

### 2. ç»Ÿè®¡æ•°æ®è®¡ç®—

```javascript
// æ¨èï¼šä½¿ç”¨computed
const summaryData = computed(() => {
  const data = tableData.value
  return {
    total: data.reduce((sum, row) => sum + row.amount, 0),
    avg: data.length > 0 ? data.reduce((sum, row) => sum + row.amount, 0) / data.length : 0,
    count: data.length
  }
})
```

### 3. äº‹ä»¶å¤„ç†

```javascript
// æ¨èï¼šç»Ÿä¸€å¤„ç†
const handleAdd = () => {
  dialogVisible.value = true
  formData.value = getDefaultFormData()
}

const handleEdit = (row) => {
  dialogVisible.value = true
  formData.value = { ...row }
}

const handleDelete = async (rows) => {
  try {
    await ElMessageBox.confirm('ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ')
    // è°ƒç”¨åˆ é™¤API
    await deleteApi(rows.map(r => r.id))
    ElMessage.success('åˆ é™¤æˆåŠŸ')
    loadData()
  } catch (error) {
    // å¤„ç†é”™è¯¯
  }
}
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–æç¤º

### 1. å¤§æ•°æ®é‡ä¼˜åŒ–

```vue
<!-- è¶…è¿‡1000è¡Œä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ -->
<VirtualTable
  :data="largeDataset"
  :columns="columns"
  :item-size="50"
/>
```

### 2. é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

```javascript
// ä½¿ç”¨computedç¼“å­˜è®¡ç®—ç»“æœ
const visibleData = computed(() => {
  return tableData.value.filter(row => row.visible)
})
```

### 3. åˆ†é¡µåŠ è½½

```javascript
// æ¨èï¼šåç«¯åˆ†é¡µ
const loadData = async () => {
  const { data } = await api.getList({
    page: currentPage.value,
    pageSize: pageSize.value
  })
  tableData.value = data.list
  total.value = data.total
}
```

---

**å¿«é€Ÿå‚è€ƒæŒ‡å—å®Œæˆï¼** ğŸ‰
