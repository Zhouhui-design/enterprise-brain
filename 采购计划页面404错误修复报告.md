# é‡‡è´­è®¡åˆ’é¡µé¢404é”™è¯¯ä¿®å¤æŠ¥å‘Š

## ğŸ“‹ é—®é¢˜æ¦‚è¿°

**é—®é¢˜æè¿°**: é‡‡è´­è®¡åˆ’é¡µé¢åŠ è½½æ•°æ®å¤±è´¥ï¼Œæç¤º404é”™è¯¯  
**é”™è¯¯ä¿¡æ¯**: `åŠ è½½æ•°æ®å¤±è´¥: Request failed with status code 404`  
**å½±å“èŒƒå›´**: é‡‡è´­è®¡åˆ’é¡µé¢æ— æ³•åŠ è½½æ•°æ®ï¼ŒåŠŸèƒ½å®Œå…¨ä¸å¯ç”¨  
**ä¿®å¤æ—¶é—´**: 2025-12-16  

---

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 

**APIè·¯å¾„é‡å¤é—®é¢˜**ï¼šå‰ç«¯APIé…ç½®ä¸­çš„è·¯å¾„åŒ…å«äº† `/api` å‰ç¼€ï¼Œä½† `request.js` çš„ `baseURL` å·²ç»é…ç½®äº† `/api`ï¼Œå¯¼è‡´æœ€ç»ˆè¯·æ±‚è·¯å¾„é”™è¯¯ã€‚

### é”™è¯¯çš„è¯·æ±‚æµç¨‹

```javascript
// âŒ é”™è¯¯é…ç½®
// procurementPlan.js
getList(params) {
  return request.get('/api/procurement-plans', { params })
}

// request.js
baseURL: '/api'

// æœ€ç»ˆè¯·æ±‚è·¯å¾„
'/api' + '/api/procurement-plans' = '/api/api/procurement-plans' âŒ
```

### æ­£ç¡®çš„è¯·æ±‚æµç¨‹

```javascript
// âœ… æ­£ç¡®é…ç½®
// procurementPlan.js
getList(params) {
  return request.get('/procurement-plans', { params })
}

// request.js
baseURL: '/api'

// æœ€ç»ˆè¯·æ±‚è·¯å¾„
'/api' + '/procurement-plans' = '/api/procurement-plans' âœ…
```

---

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### ä¿®æ”¹æ–‡ä»¶

**æ–‡ä»¶è·¯å¾„**: `/07-frontend/src/api/procurementPlan.js`

### ä¿®æ”¹å†…å®¹

ç§»é™¤æ‰€æœ‰APIæ–¹æ³•ä¸­çš„ `/api` å‰ç¼€ï¼Œå› ä¸º `request.js` çš„ `baseURL` å·²ç»åŒ…å«äº†è¿™ä¸ªå‰ç¼€ã€‚

#### 1. è·å–åˆ—è¡¨æ¥å£
```javascript
// âŒ ä¿®æ”¹å‰
getList(params) {
  return request.get('/api/procurement-plans', { params })
}

// âœ… ä¿®æ”¹å
getList(params) {
  return request.get('/procurement-plans', { params })
}
```

#### 2. è·å–è¯¦æƒ…æ¥å£
```javascript
// âŒ ä¿®æ”¹å‰
getById(id) {
  return request.get(`/api/procurement-plans/${id}`)
}

// âœ… ä¿®æ”¹å
getById(id) {
  return request.get(`/procurement-plans/${id}`)
}
```

#### 3. æ–°å¢æ¥å£
```javascript
// âŒ ä¿®æ”¹å‰
create(data) {
  return request.post('/api/procurement-plans', data)
}

// âœ… ä¿®æ”¹å
create(data) {
  return request.post('/procurement-plans', data)
}
```

#### 4. æ›´æ–°æ¥å£
```javascript
// âŒ ä¿®æ”¹å‰
update(id, data) {
  return request.put(`/api/procurement-plans/${id}`, data)
}

// âœ… ä¿®æ”¹å
update(id, data) {
  return request.put(`/procurement-plans/${id}`, data)
}
```

#### 5. åˆ é™¤æ¥å£
```javascript
// âŒ ä¿®æ”¹å‰
delete(id) {
  return request.delete(`/api/procurement-plans/${id}`)
}

// âœ… ä¿®æ”¹å
delete(id) {
  return request.delete(`/procurement-plans/${id}`)
}
```

#### 6. æ‰¹é‡åˆ é™¤æ¥å£
```javascript
// âŒ ä¿®æ”¹å‰
batchDelete(ids) {
  return request.post('/api/procurement-plans/batch-delete', { ids })
}

// âœ… ä¿®æ”¹å
batchDelete(ids) {
  return request.post('/procurement-plans/batch-delete', { ids })
}
```

#### 7. æ‰¹é‡ç»ˆæ­¢æ¥å£
```javascript
// âŒ ä¿®æ”¹å‰
batchTerminate(ids) {
  return request.post('/api/procurement-plans/batch-terminate', { ids })
}

// âœ… ä¿®æ”¹å
batchTerminate(ids) {
  return request.post('/procurement-plans/batch-terminate', { ids })
}
```

#### 8. æ‰¹é‡æ’¤å›æ¥å£
```javascript
// âŒ ä¿®æ”¹å‰
batchRecall(ids) {
  return request.post('/api/procurement-plans/batch-recall', { ids })
}

// âœ… ä¿®æ”¹å
batchRecall(ids) {
  return request.post('/procurement-plans/batch-recall', { ids })
}
```

---

## âœ… éªŒè¯ç»“æœ

### åç«¯è·¯ç”±é…ç½®ç¡®è®¤

**æ–‡ä»¶**: `/backend/server.js` (ç¬¬128è¡Œ)
```javascript
app.use('/api/procurement-plans', procurementPlansRouter);
console.log('ğŸ›’ é‡‡è´­è®¡åˆ’è·¯ç”±å·²æ³¨å†Œ: /api/procurement-plans');
```

**åç«¯æœåŠ¡çŠ¶æ€**: âœ… æ­£åœ¨è¿è¡Œï¼ˆPID: 2117306ï¼Œç«¯å£: 3005ï¼‰

### å‰ç«¯é…ç½®ç¡®è®¤

**æ–‡ä»¶**: `/07-frontend/src/utils/request.js` (ç¬¬7è¡Œ)
```javascript
baseURL: import.meta.env.VITE_API_BASE_URL || '/api'
```

### æœ€ç»ˆè¯·æ±‚è·¯å¾„éªŒè¯

| APIæ–¹æ³• | ç›¸å¯¹è·¯å¾„ | baseURL | å®Œæ•´è·¯å¾„ | çŠ¶æ€ |
|---------|---------|---------|---------|------|
| getList | `/procurement-plans` | `/api` | `/api/procurement-plans` | âœ… |
| getById | `/procurement-plans/{id}` | `/api` | `/api/procurement-plans/{id}` | âœ… |
| create | `/procurement-plans` | `/api` | `/api/procurement-plans` | âœ… |
| update | `/procurement-plans/{id}` | `/api` | `/api/procurement-plans/{id}` | âœ… |
| delete | `/procurement-plans/{id}` | `/api` | `/api/procurement-plans/{id}` | âœ… |
| batchDelete | `/procurement-plans/batch-delete` | `/api` | `/api/procurement-plans/batch-delete` | âœ… |
| batchTerminate | `/procurement-plans/batch-terminate` | `/api` | `/api/procurement-plans/batch-terminate` | âœ… |
| batchRecall | `/procurement-plans/batch-recall` | `/api` | `/api/procurement-plans/batch-recall` | âœ… |

---

## ğŸ“Š å½±å“èŒƒå›´

### ä¿®æ”¹çš„æ–‡ä»¶
- âœ… `/07-frontend/src/api/procurementPlan.js` - APIè·¯å¾„é…ç½®ä¿®æ­£

### å½±å“çš„åŠŸèƒ½
- âœ… é‡‡è´­è®¡åˆ’åˆ—è¡¨åŠ è½½
- âœ… é‡‡è´­è®¡åˆ’è¯¦æƒ…æŸ¥çœ‹
- âœ… é‡‡è´­è®¡åˆ’æ–°å¢
- âœ… é‡‡è´­è®¡åˆ’ç¼–è¾‘
- âœ… é‡‡è´­è®¡åˆ’åˆ é™¤
- âœ… é‡‡è´­è®¡åˆ’æ‰¹é‡åˆ é™¤
- âœ… é‡‡è´­è®¡åˆ’æ‰¹é‡ç»ˆæ­¢
- âœ… é‡‡è´­è®¡åˆ’æ‰¹é‡æ’¤å›

### æœªå½±å“çš„åŠŸèƒ½
- å…¶ä»–é¡µé¢çš„APIè°ƒç”¨ï¼ˆå„è‡ªç‹¬ç«‹ï¼‰
- åç«¯è·¯ç”±é…ç½®ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
- æ•°æ®åº“è¡¨ç»“æ„ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰

---

## ğŸ¯ ç»éªŒæ€»ç»“

### å…³é”®æ•™è®­

1. **APIè·¯å¾„é…ç½®è§„èŒƒ**
   - `request.js` çš„ `baseURL` å·²åŒ…å« `/api` å‰ç¼€
   - APIæ–¹æ³•ä¸­åªéœ€è¦å†™ç›¸å¯¹è·¯å¾„ï¼ˆå¦‚ `/procurement-plans`ï¼‰
   - ä¸è¦åœ¨APIæ–¹æ³•ä¸­é‡å¤æ·»åŠ  `/api` å‰ç¼€

2. **å‰åç«¯APIè·¯å¾„å¯¹åº”å…³ç³»**
   ```
   å‰ç«¯: request.get('/procurement-plans')
   â†“ (request.js baseURL)
   å®é™…è¯·æ±‚: GET /api/procurement-plans
   â†“ (åç«¯è·¯ç”±)
   åç«¯: app.use('/api/procurement-plans', router)
   ```

3. **ç»Ÿä¸€çš„APIé…ç½®æ¨¡å¼**
   - æ‰€æœ‰APIæ¨¡å—éƒ½åº”éµå¾ªç›¸åŒçš„è·¯å¾„é…ç½®è§„èŒƒ
   - é¿å…åœ¨ä¸åŒæ¨¡å—ä¸­ä½¿ç”¨ä¸åŒçš„é…ç½®æ–¹å¼

### æœ€ä½³å®è·µ

#### âœ… æ­£ç¡®çš„APIé…ç½®æ¨¡å¼

```javascript
// @/utils/request.js
const service = axios.create({
  baseURL: '/api',  // ç»Ÿä¸€å‰ç¼€
  timeout: 15000
})

// @/api/xxx.js
export const xxxApi = {
  getList(params) {
    return request.get('/xxx', { params })  // ç›¸å¯¹è·¯å¾„ï¼Œä¸åŒ…å«/api
  }
}

// backend/server.js
app.use('/api/xxx', xxxRouter)  // å®Œæ•´è·¯å¾„
```

#### âŒ é”™è¯¯çš„APIé…ç½®æ¨¡å¼

```javascript
// âŒ é”™è¯¯1: APIæ–¹æ³•ä¸­åŒ…å«/apiå‰ç¼€
export const xxxApi = {
  getList(params) {
    return request.get('/api/xxx', { params })  // ä¼šå˜æˆ /api/api/xxx
  }
}

// âŒ é”™è¯¯2: baseURLä¸ºç©ºï¼Œä½†APIæ–¹æ³•ä¸­ä¸åŒ…å«/api
const service = axios.create({
  baseURL: '',  // ç©ºçš„baseURL
})
export const xxxApi = {
  getList(params) {
    return request.get('/xxx', { params })  // ä¼šå˜æˆ /xxxï¼ˆç¼ºå°‘/apiï¼‰
  }
}
```

### æ’æŸ¥æµç¨‹

é‡åˆ°404é”™è¯¯æ—¶çš„æ ‡å‡†æ’æŸ¥æµç¨‹ï¼š

1. **æ£€æŸ¥æµè§ˆå™¨Networké¢æ¿**
   - æŸ¥çœ‹å®é™…è¯·æ±‚çš„URLæ˜¯ä»€ä¹ˆ
   - æ£€æŸ¥å“åº”çŠ¶æ€ç å’Œé”™è¯¯ä¿¡æ¯

2. **æ£€æŸ¥å‰ç«¯APIé…ç½®**
   - ç¡®è®¤APIæ–¹æ³•ä¸­çš„è·¯å¾„æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æ˜¯å¦ä¸baseURLé‡å¤

3. **æ£€æŸ¥åç«¯è·¯ç”±é…ç½®**
   - ç¡®è®¤è·¯ç”±æ˜¯å¦å·²æ³¨å†Œ
   - ç¡®è®¤è·¯ç”±è·¯å¾„æ˜¯å¦åŒ¹é…

4. **æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€**
   - ç¡®è®¤åç«¯æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œ
   - ç¡®è®¤ç«¯å£æ˜¯å¦æ­£ç¡®

---

## ğŸ“ ç›¸å…³æ–‡ä»¶æ¸…å•

### å‰ç«¯æ–‡ä»¶
- `/07-frontend/src/api/procurementPlan.js` - APIé…ç½®ï¼ˆå·²ä¿®å¤ï¼‰
- `/07-frontend/src/utils/request.js` - è¯·æ±‚å°è£…ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
- `/07-frontend/src/pages/purchase/ProcurementPlanList.vue` - é‡‡è´­è®¡åˆ’é¡µé¢ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
- `/07-frontend/src/router/modules/purchase.js` - è·¯ç”±é…ç½®ï¼ˆå·²ä¿®æ­£ï¼‰
- `/07-frontend/src/router/modules/purchase-management.js` - è·¯ç”±é…ç½®ï¼ˆå·²ä¿®æ­£ï¼‰

### åç«¯æ–‡ä»¶
- `/backend/server.js` - è·¯ç”±æ³¨å†Œï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
- `/backend/routes/procurementPlans.js` - åç«¯è·¯ç”±å®ç°ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
- `/backend/services/procurementPlanService.js` - ä¸šåŠ¡é€»è¾‘ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰

---

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

1. **åˆ·æ–°æµè§ˆå™¨é¡µé¢**
   - è®¿é—®: http://localhost:3003/purchase/procurement-plan
   - éªŒè¯æ•°æ®æ˜¯å¦æ­£å¸¸åŠ è½½

2. **æµ‹è¯•æ‰€æœ‰åŠŸèƒ½**
   - âœ… åˆ—è¡¨åŠ è½½
   - âœ… æœç´¢ç­›é€‰
   - âœ… åˆ†é¡µåŠŸèƒ½
   - âœ… æ‰¹é‡åˆ é™¤
   - âœ… æ‰¹é‡ç»ˆæ­¢
   - âœ… æ‰¹é‡æ’¤å›

3. **ç›‘æ§é”™è¯¯æ—¥å¿—**
   - æŸ¥çœ‹æµè§ˆå™¨Consoleæ˜¯å¦æœ‰å…¶ä»–é”™è¯¯
   - æŸ¥çœ‹åç«¯æ—¥å¿—ç¡®è®¤è¯·æ±‚æ˜¯å¦æ­£å¸¸å¤„ç†

---

## âœ¨ ä¿®å¤å®Œæˆ

**ä¿®å¤çŠ¶æ€**: âœ… å·²å®Œæˆ  
**éªŒè¯çŠ¶æ€**: â³ å¾…ç”¨æˆ·éªŒè¯  
**å¤‡ä»½çŠ¶æ€**: â³ å¾…ç”¨æˆ·æµ‹è¯•åå¤‡ä»½  

**å¤‡æ³¨**: æ‰€æœ‰APIè·¯å¾„é…ç½®å·²ä¿®æ­£ï¼Œå‰åç«¯è·¯ç”±åŒ¹é…æ­£ç¡®ï¼Œè¯·åˆ·æ–°æµè§ˆå™¨é¡µé¢éªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚
