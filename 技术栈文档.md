# 技术栈文档

## 一、项目概述
企业大脑系统是一个基于Vue 3和Express的企业资源规划系统，包含前端管理界面和后端API服务，主要功能包括生产计划管理、物料管理、销售订单管理、采购管理等。

## 二、完整技术栈

### 前端技术栈（07-frontend）
- **框架**: Vue 3.3.0
- **构建工具**: Vite 4.3.0
- **路由**: Vue Router 4.2.0
- **状态管理**: Pinia 2.1.0
- **UI组件**: Element Plus 2.3.0
- **数据请求**: Axios 1.13.2
- **日期处理**: date-fns 4.1.0
- **表格拖拽**: vuedraggable 4.1.0
- **Excel处理**: xlsx 0.18.5
- **开发语言**: JavaScript/TypeScript 5.0.0

### 后端技术栈（backend）
- **运行环境**: Node.js 20.x 或更高
- **Web框架**: Express 5.1.0
- **API路由**: Express Router + 路由自动加载机制
- **模块化设计**: 
  - 路由自动加载: 自动扫描routes目录，简化路由注册
  - 控制器层: 为主要业务模块创建独立控制器
  - 公共服务逻辑: 提取工序计划服务的公共逻辑到工具类
  - 模块化配置: 集中管理所有模块依赖和配置
- **数据库**: 
  - SQLite (主要使用，基于文件存储)
  - MySQL (部分代码中显示支持)
- **工具库**: 
  - uuid: 生成唯一ID (版本8.3.2)
  - cors: 跨域支持
  - node-cron: 定时任务
  - fs: 文件系统操作
  - path: 路径处理
  - winston: 结构化日志记录
  - winston-daily-rotate-file: 日志自动备份

### 数据库技术
- **SQLite**: 轻量级文件数据库，用于开发环境和小型部署
- **MySQL**: 关系型数据库，用于生产环境和大型部署

## 三、依赖清单

### 前端依赖（07-frontend/package.json）
```json
{
  "name": "enterprise-brain-frontend",
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext .vue,.js,.jsx,.cjs,.mjs,.ts,.tsx,.cts,.mts --fix --ignore-path .gitignore",
    "format": "prettier --write src/"
  },
  "dependencies": {
    "axios": "^1.13.2",
    "date-fns": "^4.1.0",
    "element-plus": "^2.3.0",
    "pinia": "^2.1.0",
    "vue": "^3.3.0",
    "vue-router": "^4.2.0",
    "vuedraggable": "^4.1.0",
    "xlsx": "^0.18.5"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.2.0",
    "eslint": "^8.0.0",
    "prettier": "^3.0.0",
    "typescript": "^5.0.0",
    "vite": "^4.3.0",
    "vue-tsc": "^1.4.0"
  }
}
```

### 后端依赖（backend/package.json）
```json
{
  "name": "enterprise-brain-backend",
  "version": "1.0.0",
  "description": "Enterprise Brain Backend API",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "jest --testTimeout=10000",
    "test:watch": "jest --watch --testTimeout=10000",
    "test:coverage": "jest --coverage --testTimeout=10000",
    "db:migrate": "npx sequelize-cli db:migrate",
    "db:migrate:undo": "npx sequelize-cli db:migrate:undo",
    "db:migrate:undo:all": "npx sequelize-cli db:migrate:undo:all",
    "db:seed": "npx sequelize-cli db:seed:all",
    "db:seed:undo": "npx sequelize-cli db:seed:undo",
    "db:seed:undo:all": "npx sequelize-cli db:seed:undo:all",
    "db:create": "npx sequelize-cli db:create",
    "db:drop": "npx sequelize-cli db:drop"
  },
  "dependencies": {
    "better-sqlite3": "^12.5.0",
    "cors": "^2.8.5",
    "express": "^5.1.0",
    "mysql2": "^3.16.0",
    "node-cron": "^4.2.1",
    "sequelize": "^6.37.7",
    "sequelize-cli": "^6.6.3",
    "sqlite3": "^5.1.7",
    "swagger-jsdoc": "^6.2.8",
    "swagger-ui-express": "^5.0.1",
    "uuid": "^8.3.2",
    "winston": "^3.19.0",
    "winston-daily-rotate-file": "^5.0.0"
  },
  "devDependencies": {
    "jest": "^30.2.0",
    "nodemon": "^3.1.11",
    "sass": "^1.97.1",
    "supertest": "^7.1.4"
  }
}
```

## 四、多端适配

### 1. PC端
- **操作系统支持**: Windows、macOS、Linux
- **浏览器支持**: Chrome、Firefox、Safari、Edge
- **分辨率支持**: 1920x1080 及以上

### 2. 移动端
- **操作系统支持**: Android、iOS、鸿蒙
- **浏览器支持**: Chrome、Safari、微信内置浏览器
- **分辨率支持**: 自适应各种移动端分辨率

### 3. 工控版
- **操作系统支持**: Windows 10 IoT
- **分辨率支持**: 1024x768 及以上

### 4. 平板电脑版
- **操作系统支持**: Android、iOS、Windows
- **分辨率支持**: 自适应各种平板电脑分辨率

## 五、项目结构

```
enterpise-brain/
├── 07-frontend/              # 前端项目目录
│   ├── src/                 # 前端源代码
│   ├── node_modules/        # 前端依赖
│   ├── package.json         # 前端依赖配置
│   └── vite.config.js       # Vite配置文件
├── backend/                 # 后端项目目录
│   ├── routes/              # API路由
│   ├── controllers/         # 控制器
│   ├── models/              # 数据模型
│   ├── services/            # 业务逻辑
│   ├── database/            # 数据库配置
│   ├── node_modules/        # 后端依赖
│   └── package.json         # 后端依赖配置
├── 技术栈文档.md            # 技术栈文档
└── 环境依赖说明.md          # 环境依赖说明文档
```

## 六、更新记录

| 日期 | 更新内容 | 更新人 |
|------|---------|-------|
| 2025-12-25 | 完成模块化设计优化，包括：<br>- 实现路由自动加载机制<br>- 完善控制器层<br>- 提取公共服务逻辑<br>- 创建模块化配置文件 | sardenesy |
| 2025-12-24 | 初始创建文档 | sardenesy |
