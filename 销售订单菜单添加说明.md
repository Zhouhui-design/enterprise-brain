# 销售订单菜单添加说明

## 📅 更新时间
2025年12月2日

---

## ❓ 需求描述

**用户需求：**
> 把销售订单页面（http://localhost:3001/sales/orders/list）放在左侧菜单栏

**目标：**
- 在左侧菜单栏添加"销售订单"菜单项
- 点击后跳转到 `/sales/orders/list` 页面
- 作为一级菜单显示，方便快速访问

---

## ✅ 解决方案

### 修改文件

**文件：** `07-frontend/src/layout/index.vue`

**修改位置：** `loadMenus()` 方法中的菜单配置（第344-349行）

---

### 具体修改

**修改前：**
```javascript
{
  path: '/sales/orders/customers',
  name: 'CustomerList',
  meta: { title: '客户台账' },
  icon: 'el-icon-user'
},
{
  path: '/demo',
  name: 'Demo',
  meta: { title: '演示功能' },
  icon: 'el-icon-monitor',
  // ...
}
```

**修改后：**
```javascript
{
  path: '/sales/orders/customers',
  name: 'CustomerList',
  meta: { title: '客户台账' },
  icon: 'el-icon-user'
},
{
  path: '/sales/orders/list',
  name: 'SalesOrderList',
  meta: { title: '销售订单' },
  icon: 'el-icon-document'
},
{
  path: '/demo',
  name: 'Demo',
  meta: { title: '演示功能' },
  icon: 'el-icon-monitor',
  // ...
}
```

---

### 新增菜单配置

```javascript
{
  path: '/sales/orders/list',      // 路由路径
  name: 'SalesOrderList',           // 路由名称
  meta: { title: '销售订单' },      // 菜单显示标题
  icon: 'el-icon-document'          // 菜单图标
}
```

**字段说明：**
- `path`: 点击菜单后跳转的路由路径
- `name`: 路由名称（与路由配置保持一致）
- `meta.title`: 菜单栏显示的文本
- `icon`: 菜单图标（使用Element Plus图标）

---

## 📊 效果展示

### 左侧菜单栏

**更新后的菜单顺序：**
```
├── 首页
├── 回厂管理
│   ├── 回厂单列表
│   └── 质量检验
├── 仓库管理
│   ├── 入库管理
│   ├── 出库管理
│   ├── 库存转移
│   ├── 库存盘点
│   └── 库位管理
├── 产品管理
│   └── 产品手册
├── 产品手册
├── 产品物料库
├── BOM管理
│   ├── 设计BOM
│   ├── 生产BOM
│   └── 销售BOM
├── 工序
├── 研发项目管理
├── 客户台账
├── 销售订单          ← 新增 ✅
└── 演示功能
    └── 智能下拉演示
```

---

### 菜单显示效果

**图标：** 📄 文档图标  
**标题：** 销售订单  
**路径：** `/sales/orders/list`

**点击后：**
- 跳转到销售订单列表页面
- 页面URL变为：`http://localhost:3001/sales/orders/list`
- 菜单项高亮显示（蓝色背景）

---

## 🔍 技术细节

### 路由配置

**路由已存在：** `src/router/modules/sales.js`

```javascript
{
  path: 'orders',
  name: 'SalesOrderManagement',
  redirect: '/sales/orders/list',
  meta: { 
    title: '销售订单', 
    icon: 'Document',
    permission: ['sales:orders']
  },
  children: [
    {
      path: 'list',
      name: 'SalesOrderList',
      component: () => import('@/pages/sales/sales-order/SalesOrderListNew.vue'),
      meta: { 
        title: '订单列表',
        permission: ['sales:orders:list']
      }
    },
    // ... 其他子路由
  ]
}
```

**说明：**
- 路由配置已完整
- 组件文件：`@/pages/sales/sales-order/SalesOrderListNew.vue`
- 支持权限控制
- 有完整的子路由（创建、编辑、详情等）

---

### 菜单加载机制

**当前机制：** 硬编码在前端

```javascript
loadMenus() {
  // 在实际项目中，这里应该从后端获取菜单
  // 现在我们使用模拟数据
  this.menus = [
    // ... 菜单配置
  ]
}
```

**说明：**
- 菜单配置直接写在前端代码中
- 登录后自动加载菜单
- 支持菜单搜索功能
- 支持权限控制（hasPermission方法）

---

### 菜单类型

**一级菜单：** 无children属性
```javascript
{
  path: '/sales/orders/list',
  name: 'SalesOrderList',
  meta: { title: '销售订单' },
  icon: 'el-icon-document'
}
```

**二级菜单：** 有children属性
```javascript
{
  path: '/bom',
  name: 'Bom',
  meta: { title: 'BOM管理' },
  icon: 'el-icon-menu',
  children: [
    {
      path: '/bom/design',
      name: 'DesignBom',
      meta: { title: '设计BOM' },
      icon: 'el-icon-edit'
    },
    // ... 更多子菜单
  ]
}
```

---

## 🎯 使用说明

### 访问销售订单

**方法1：点击菜单**
1. 登录系统
2. 在左侧菜单栏找到"销售订单"
3. 点击"销售订单"
4. 跳转到订单列表页面

**方法2：直接访问URL**
```
http://localhost:3001/sales/orders/list
```

**方法3：通过其他页面跳转**
```javascript
// 在代码中跳转
this.$router.push('/sales/orders/list')
```

---

### 菜单功能

**1. 菜单搜索**
- 在左侧菜单顶部有搜索框
- 输入"销售"或"订单"
- 自动过滤显示相关菜单

**2. 菜单折叠**
- 点击侧边栏顶部的折叠按钮
- 菜单栏收起，只显示图标
- 鼠标悬停显示完整菜单名

**3. 面包屑导航**
- 页面顶部显示当前位置
- 格式：首页 / 销售订单
- 点击可快速返回

---

## ⚠️ 注意事项

### 1. 菜单位置

**当前位置：** 客户台账和演示功能之间

**如需调整顺序：**
- 在`loadMenus()`方法中移动菜单配置
- 调整数组中的位置即可

**示例（移到最前面）：**
```javascript
this.menus = [
  {
    path: '/dashboard',
    name: 'Dashboard',
    meta: { title: '首页' },
    icon: 'el-icon-s-home'
  },
  {
    path: '/sales/orders/list',  // 移到第二位
    name: 'SalesOrderList',
    meta: { title: '销售订单' },
    icon: 'el-icon-document'
  },
  // ... 其他菜单
]
```

---

### 2. 图标选择

**当前图标：** `el-icon-document`（文档图标）

**常用图标选项：**
```javascript
'el-icon-document'      // 文档
'el-icon-sell'          // 销售
'el-icon-shopping-cart' // 购物车
'el-icon-s-order'       // 订单
'el-icon-tickets'       // 票据
```

**修改图标：**
```javascript
{
  path: '/sales/orders/list',
  name: 'SalesOrderList',
  meta: { title: '销售订单' },
  icon: 'el-icon-s-order'  // 改为订单图标
}
```

---

### 3. 权限控制

**当前状态：** 无权限限制

**添加权限控制：**
```javascript
{
  path: '/sales/orders/list',
  name: 'SalesOrderList',
  meta: { 
    title: '销售订单',
    permissions: ['sales:orders:view']  // 添加权限
  },
  icon: 'el-icon-document'
}
```

**权限检查：**
```javascript
hasPermission(permissions) {
  // 实际项目中应该根据用户角色和权限进行检查
  const userPermissions = this.userInfo?.permissions || []
  return permissions.every(p => userPermissions.includes(p))
}
```

---

### 4. 菜单分组

**如需将销售相关菜单分组：**
```javascript
{
  path: '/sales',
  name: 'Sales',
  meta: { title: '销售管理' },
  icon: 'el-icon-sell',
  children: [
    {
      path: '/sales/orders/list',
      name: 'SalesOrderList',
      meta: { title: '销售订单' },
      icon: 'el-icon-document'
    },
    {
      path: '/sales/orders/customers',
      name: 'CustomerList',
      meta: { title: '客户台账' },
      icon: 'el-icon-user'
    }
  ]
}
```

---

## 📋 修改清单

### 修改文件

**文件：** `07-frontend/src/layout/index.vue`

**修改行：** 第344-355行

**修改内容：**
- 添加销售订单菜单配置
- 位置：客户台账和演示功能之间

---

### 新增内容

```javascript
{
  path: '/sales/orders/list',
  name: 'SalesOrderList',
  meta: { title: '销售订单' },
  icon: 'el-icon-document'
}
```

**代码量：** +6行

---

## 🎉 总结

### 核心修改

**✅ 添加销售订单菜单**
- 路径：`/sales/orders/list`
- 名称：销售订单
- 图标：文档图标
- 位置：一级菜单

---

### 功能特点

**1. 快速访问**
- 一级菜单，无需展开
- 点击直接跳转
- 菜单栏显眼位置

**2. 完整路由**
- 路由配置完整
- 页面组件已存在
- 支持子功能（创建、编辑、详情）

**3. 用户友好**
- 图标清晰
- 标题明确
- 位置合理

---

### 后续优化建议

1. **菜单分组**
   - 将销售相关菜单归类
   - 创建"销售管理"父菜单
   - 子菜单包含：订单、客户、报价等

2. **权限控制**
   - 添加权限配置
   - 根据用户角色显示菜单
   - 无权限的菜单隐藏或禁用

3. **动态菜单**
   - 从后端获取菜单配置
   - 支持动态调整菜单
   - 便于管理和扩展

4. **图标优化**
   - 使用更贴切的图标
   - 统一图标风格
   - 提升视觉效果

---

**销售订单菜单已成功添加到左侧菜单栏！** 🎊

**访问路径：** `http://localhost:3001/sales/orders/list`  
**菜单位置：** 左侧菜单栏，客户台账下方 ✅  
**功能状态：** 正常可用 ✅
