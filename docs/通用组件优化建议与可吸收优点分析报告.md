# é€šç”¨ç»„ä»¶ä¼˜åŒ–å»ºè®®ä¸å¯å¸æ”¶ä¼˜ç‚¹åˆ†ææŠ¥å‘Š

> ğŸ“Œ **ä»»åŠ¡**: åˆ†æç°æœ‰é€šç”¨ç»„ä»¶ï¼Œæå–ä¼˜ç§€è®¾è®¡æ¨¡å¼ï¼Œä¸º StandardTablePage å’Œåç»­å¼€å‘æä¾›æœ€ä½³å®è·µ

---

## ğŸ¯ åˆ†ææ¦‚è§ˆ

### åˆ†æçš„ç»„ä»¶ç±»åˆ«

**å·²åˆ†æ**: 28ä¸ªç»„ä»¶æ–‡ä»¶

| ç±»åˆ« | æ•°é‡ | ä»£ç è¡Œæ•° | å…³é”®ç»„ä»¶ |
|------|------|---------|---------|
| **å¤åˆ¶ç²˜è´´** | 7 | ~500è¡Œ | CopyButton, useCopyPaste |
| **ä¸šåŠ¡ç»„ä»¶** | 8 | ~800è¡Œ | AddressSelector, FileUploader |
| **ä¸»é¢˜å®šåˆ¶** | 6 | ~1200è¡Œ | ThemeProvider, useTheme |
| **å¼•å¯¼ç³»ç»Ÿ** | 7 | ~1100è¡Œ | GuidedTour, useTour |
| **å›¾è¡¨ç»„ä»¶** | 8 | ~600è¡Œ | BaseChart, Dashboard |

**æ€»è®¡**: ~4200è¡Œä¼˜ç§€ä»£ç 

---

## âœ¨ å¯å¸æ”¶ä¼˜ç§€è®¾è®¡æ¨¡å¼

### 1. Composable æ¨¡å¼ â­â­â­â­â­

**å‘ç°ä½ç½®**: `useResponsive.js`, `useCopyPaste.js`, `useTheme.js`, `useTour.js`

**ä¼˜ç§€ä¹‹å¤„**:
```javascript
// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseCopyPaste.js
export function useCopyPaste() {
  const isCopying = ref(false)
  const isPasting = ref(false)

  const copy = async (params) => {
    try {
      isCopying.value = true
      const response = await axios.post('/api/copy', params)
      // ...
    } finally {
      isCopying.value = false
    }
  }

  return { isCopying, isPasting, copy, paste }
}
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **çŠ¶æ€å°è£…**: çŠ¶æ€å’Œé€»è¾‘å°è£…åœ¨ä¸€èµ·
2. âœ… **å¯å¤ç”¨**: ä»»ä½•ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨
3. âœ… **æ˜“æµ‹è¯•**: é€»è¾‘ç‹¬ç«‹ï¼Œä¾¿äºå•å…ƒæµ‹è¯•
4. âœ… **ç±»å‹å®‰å…¨**: è¿”å›å€¼æ¸…æ™°ï¼ŒTypeScript å‹å¥½

**åº”ç”¨å»ºè®®**:
- âœ… åˆ›å»º `useTableManagement` composableï¼ˆè¡¨æ ¼é€šç”¨é€»è¾‘ï¼‰
- âœ… åˆ›å»º `useFormValidation` composableï¼ˆè¡¨å•éªŒè¯ï¼‰
- âœ… åˆ›å»º `useDataExport` composableï¼ˆæ•°æ®å¯¼å‡ºï¼‰

**ä»£ç æ¨¡æ¿**:
```javascript
// composables/useTableManagement.js
export function useTableManagement() {
  const loading = ref(false)
  const tableData = ref([])
  const selectedRows = ref([])
  
  const loadData = async (params) => {
    // åŠ è½½é€»è¾‘
  }
  
  const handleSelectionChange = (rows) => {
    selectedRows.value = rows
  }
  
  return {
    loading,
    tableData,
    selectedRows,
    loadData,
    handleSelectionChange
  }
}
```

---

### 2. äº‹ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç† â­â­â­â­â­

**å‘ç°ä½ç½®**: `useResponsive.js`, `useTheme.js`

**ä¼˜ç§€ä¹‹å¤„**:
```javascript
// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseResponsive.js
onMounted(() => {
  mobileQuery = window.matchMedia('(max-width: 640px)')
  mobileQuery.addEventListener('change', updateBreakpoints)
  console.log('âœ… useResponsive: å“åº”å¼æ–­ç‚¹ç³»ç»Ÿå·²æ¿€æ´»')
})

onUnmounted(() => {
  mobileQuery?.removeEventListener('change', updateBreakpoints)
  console.log('âœ… useResponsive: äº‹ä»¶ç›‘å¬å™¨å·²æ¸…ç†')
})
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **é¿å…å†…å­˜æ³„æ¼**: æ­£ç¡®æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
2. âœ… **ç”Ÿå‘½å‘¨æœŸå®Œæ•´**: ä»æŒ‚è½½åˆ°å¸è½½å…¨æµç¨‹ç®¡ç†
3. âœ… **å¯é€‰é“¾æ“ä½œç¬¦**: ä½¿ç”¨ `?.` é¿å… null é”™è¯¯
4. âœ… **æ—¥å¿—è®°å½•**: ä¾¿äºè°ƒè¯•å’Œç›‘æ§

**åº”ç”¨å»ºè®®**:
- âœ… StandardTablePage å·²å®æ–½ï¼ˆé”®ç›˜å¯¼èˆªã€ç‚¹å‡»å¤–éƒ¨å…³é—­ï¼‰
- âœ… å…¶ä»–ç»„ä»¶ä¹Ÿåº”éµå¾ªæ­¤æ¨¡å¼
- âœ… ä½¿ç”¨ `console.log` æ ‡è®°ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ

**åæ¨¡å¼è­¦å‘Š**:
```javascript
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šæœªæ¸…ç†äº‹ä»¶ç›‘å¬å™¨
onMounted(() => {
  window.addEventListener('resize', handleResize)
  // âŒ æœªåœ¨ onUnmounted ä¸­æ¸…ç†
})

// âœ… æ­£ç¡®ç¤ºä¾‹
onMounted(() => {
  window.addEventListener('resize', handleResize)
})

onUnmounted(() => {
  window.removeEventListener('resize', handleResize)
})
```

---

### 3. é”™è¯¯å¤„ç†ä¸åŠ è½½çŠ¶æ€ â­â­â­â­â­

**å‘ç°ä½ç½®**: `useCopyPaste.js`, `useTheme.js`, `useTour.js`

**ä¼˜ç§€ä¹‹å¤„**:
```javascript
// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseCopyPaste.js
const copy = async (params) => {
  try {
    isCopying.value = true
    const response = await axios.post('/api/copy', params)
    
    if (response.data.success) {
      ElMessage.success('å¤åˆ¶æˆåŠŸ')
      await navigator.clipboard.writeText(params.content)
    } else {
      ElMessage.error(response.data.message || 'å¤åˆ¶å¤±è´¥')
    }
    return response.data
  } catch (error) {
    console.error('å¤åˆ¶æ“ä½œå¤±è´¥:', error)
    ElMessage.error('å¤åˆ¶æ“ä½œå¼‚å¸¸ï¼Œè¯·é‡è¯•')
    return { success: false }
  } finally {
    isCopying.value = false
  }
}
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **ä¸‰æ®µå¼ç»“æ„**: try-catch-finally å®Œæ•´è¦†ç›–
2. âœ… **åŠ è½½çŠ¶æ€**: `finally` ç¡®ä¿çŠ¶æ€é‡ç½®
3. âœ… **ç”¨æˆ·å‹å¥½**: ä½¿ç”¨ ElMessage æç¤ºç”¨æˆ·
4. âœ… **æ—¥å¿—è®°å½•**: console.error è®°å½•é”™è¯¯è¯¦æƒ…
5. âœ… **é™çº§å¤„ç†**: é”™è¯¯æ—¶è¿”å› `{ success: false }`

**åº”ç”¨å»ºè®®**:
- âœ… æ‰€æœ‰ API è°ƒç”¨éƒ½ä½¿ç”¨æ­¤æ¨¡å¼
- âœ… æä¾›é»˜è®¤é”™è¯¯æ¶ˆæ¯
- âœ… è®°å½•é”™è¯¯æ—¥å¿—ä¾¿äºè°ƒè¯•

**ä»£ç æ¨¡æ¿**:
```javascript
const executeAction = async (params) => {
  try {
    loading.value = true
    const result = await api.call(params)
    
    if (result.success) {
      ElMessage.success('æ“ä½œæˆåŠŸ')
      return result.data
    } else {
      throw new Error(result.message || 'æ“ä½œå¤±è´¥')
    }
  } catch (error) {
    console.error('æ“ä½œå¤±è´¥:', error)
    ElMessage.error(error.message || 'æ“ä½œå¼‚å¸¸ï¼Œè¯·é‡è¯•')
    return null
  } finally {
    loading.value = false
  }
}
```

---

### 4. é…ç½®å¯¹è±¡æ¨¡å¼ â­â­â­â­â­

**å‘ç°ä½ç½®**: `useTheme.js`, `useTour.js`

**ä¼˜ç§€ä¹‹å¤„**:
```javascript
// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseTheme.js
const themeSettings = useStorage('app-theme-settings', {
  enableSystemTheme: false,
  followSystemColor: false,
  autoSwitchTheme: false,
  themeTransitionDuration: 300
})

// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseTour.js
const tourState = reactive({
  config: {
    allowSkip: true,
    showProgress: true,
    allowKeyboardNavigation: true,
    autoScroll: true,
    showOverlay: true,
    onComplete: null,
    onSkip: null,
    onStepChange: null,
    trackCompletion: true,
    ...initialConfig  // âœ… æ”¯æŒç”¨æˆ·è¦†ç›–
  }
})
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **é»˜è®¤å€¼æ¸…æ™°**: ä¸€ç›®äº†ç„¶çš„é»˜è®¤é…ç½®
2. âœ… **å¯æ‰©å±•**: ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦æ”¯æŒè¦†ç›–
3. âœ… **ç±»å‹å®‰å…¨**: é…ç½®é¡¹æ˜ç¡®ï¼Œä¾¿äº IDE æç¤º
4. âœ… **æ–‡æ¡£åŒ–**: é…ç½®å¯¹è±¡æœ¬èº«å°±æ˜¯æ–‡æ¡£

**åº”ç”¨å»ºè®®**:
- âœ… StandardTablePage ä½¿ç”¨ `defaultSettings`
- âœ… å…¶ä»–ç»„ä»¶ä¹Ÿåº”æä¾›é…ç½®å¯¹è±¡
- âœ… ä½¿ç”¨ JSDoc æ³¨é‡Šé…ç½®é¡¹

**ä»£ç æ¨¡æ¿**:
```javascript
// âœ… é…ç½®å¯¹è±¡æ¨¡å¼
const tableConfig = {
  // åŸºç¡€é…ç½®
  pageSize: 20,
  showSelection: true,
  showFilter: true,
  
  // å“åº”å¼é…ç½®
  mobilePageSize: 10,
  tabletPageSize: 15,
  
  // åŠŸèƒ½å¼€å…³
  enableKeyboardNav: true,
  enableClickOutside: true,
  
  // å›è°ƒå‡½æ•°
  onRefresh: null,
  onSelectionChange: null
}
```

---

### 5. æœ¬åœ°å­˜å‚¨æŒä¹…åŒ– â­â­â­â­

**å‘ç°ä½ç½®**: `useTheme.js`, `useTour.js`

**ä¼˜ç§€ä¹‹å¤„**:
```javascript
// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šä½¿ç”¨ @vueuse/core çš„ useStorage
const currentThemeName = useStorage('app-theme', 'default')
const customThemes = useStorage('app-custom-themes', {})

// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šè‡ªå®šä¹‰å­˜å‚¨é€»è¾‘
const saveTourCompletion = (tourName) => {
  try {
    localStorage.setItem(`tour_completed_${tourName}`, 'true')
    localStorage.setItem(`tour_completed_date_${tourName}`, new Date().toISOString())
  } catch (error) {
    console.warn('Failed to save tour completion:', error)
  }
}
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **æŒä¹…åŒ–**: ç”¨æˆ·è®¾ç½®è·¨ä¼šè¯ä¿å­˜
2. âœ… **å®¹é”™å¤„ç†**: try-catch é¿å…å­˜å‚¨å¤±è´¥
3. âœ… **å‘½åè§„èŒƒ**: ä½¿ç”¨å‰ç¼€é¿å…å†²çª
4. âœ… **è‡ªåŠ¨åŒæ­¥**: useStorage è‡ªåŠ¨å“åº”å¼æ›´æ–°

**åº”ç”¨å»ºè®®**:
- âœ… PageSettings å·²ä½¿ç”¨ localStorage
- âœ… å…¶ä»–ç»„ä»¶ä¹Ÿåº”æŒä¹…åŒ–ç”¨æˆ·è®¾ç½®
- âœ… æ¨èä½¿ç”¨ `@vueuse/core` çš„ `useStorage`

**ä»£ç æ¨¡æ¿**:
```javascript
import { useStorage } from '@vueuse/core'

// âœ… æ¨èæ–¹å¼
const userPreferences = useStorage('user-preferences', {
  theme: 'default',
  pageSize: 20,
  visibleColumns: []
})

// âœ… æ‰‹åŠ¨æ–¹å¼
const savePreferences = (key, value) => {
  try {
    localStorage.setItem(`app-${key}`, JSON.stringify(value))
  } catch (error) {
    console.warn('å­˜å‚¨å¤±è´¥:', error)
  }
}
```

---

### 6. æ¸è¿›å¢å¼ºç­–ç•¥ â­â­â­â­â­

**å‘ç°ä½ç½®**: `useTour.js`, `useTheme.js`

**ä¼˜ç§€ä¹‹å¤„**:
```javascript
// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseTour.js - æ£€æŸ¥å®ŒæˆçŠ¶æ€
if (tourState.config.trackCompletion && tourState.config.tourName) {
  const isCompleted = await checkTourCompletion(tourState.config.tourName)
  if (isCompleted) {
    tourState.isActive = false
    return { completed: true }
  }
}

// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseTheme.js - å¯é€‰åŠŸèƒ½
if (themeSettings.value.enableSystemTheme) {
  enableSystemThemeFollow(true)
}
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **ä¸ç ´åç°æœ‰åŠŸèƒ½**: æ–°åŠŸèƒ½å¯é€‰
2. âœ… **å‘åå…¼å®¹**: è€ä»£ç æ— éœ€ä¿®æ”¹
3. âœ… **ç”¨æˆ·æ§åˆ¶**: ç”¨æˆ·å†³å®šæ˜¯å¦å¯ç”¨
4. âœ… **æ¡ä»¶æ¸²æŸ“**: åªåœ¨éœ€è¦æ—¶æ¿€æ´»

**åº”ç”¨å»ºè®®**:
- âœ… StandardTablePage v2.1 å·²å®æ–½
- âœ… æ‰€æœ‰æ–°åŠŸèƒ½éƒ½åº”éµå¾ªæ­¤ç­–ç•¥
- âœ… æä¾›åŠŸèƒ½å¼€å…³ props

**ç¤ºä¾‹**:
```vue
<!-- âœ… æ¸è¿›å¢å¼ºç¤ºä¾‹ -->
<StandardTablePage
  page-title="é¡µé¢æ ‡é¢˜"
  
  <!-- åŸºç¡€åŠŸèƒ½ï¼ˆå¿…éœ€ï¼‰ -->
  :table-data="tableData"
  :columns="columns"
  
  <!-- æ–°åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰ -->
  :show-breadcrumb="true"  <!-- é»˜è®¤ trueï¼Œå¯å…³é—­ -->
  :breadcrumb-items="items"  <!-- æä¾›æ•°æ®æ—¶æ‰æ˜¾ç¤º -->
  @keyboard-search="handleSearch"  <!-- ç›‘å¬äº‹ä»¶æ—¶æ‰å¯ç”¨ -->
/>
```

---

### 7. è®¡ç®—å±æ€§ä¼˜åŒ– â­â­â­â­

**å‘ç°ä½ç½®**: `useTour.js`, `useTheme.js`

**ä¼˜ç§€ä¹‹å¤„**:
```javascript
// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseTour.js
const isFirstStep = computed(() => tourState.currentIndex === 0)
const isLastStep = computed(() => tourState.currentIndex >= tourState.totalSteps - 1)
const progressPercentage = computed(() => {
  if (tourState.totalSteps === 0) return 0
  return Math.round((tourState.currentIndex + 1) / tourState.totalSteps * 100)
})

const nextStepAvailable = computed(() => 
  tourState.currentIndex < tourState.totalSteps - 1
)

// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseTheme.js
const isDarkMode = computed(() => {
  return currentTheme.value?.mode === 'dark'
})

const themeColors = computed(() => ({
  primary: currentTheme.value?.primaryColor || '#409EFF',
  background: currentTheme.value?.backgroundColor || '#ffffff',
  text: currentTheme.value?.textColor || '#303133',
  // ... æ›´å¤šé¢œè‰²
}))
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **ç¼“å­˜è®¡ç®—ç»“æœ**: é¿å…é‡å¤è®¡ç®—
2. âœ… **å“åº”å¼æ›´æ–°**: ä¾èµ–å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°
3. âœ… **å¯é€‰é“¾æ“ä½œç¬¦**: å®‰å…¨è®¿é—®åµŒå¥—å±æ€§
4. âœ… **é»˜è®¤å€¼**: æä¾› fallback é¿å… undefined

**åº”ç”¨å»ºè®®**:
- âœ… StandardTablePage å·²ä½¿ç”¨ï¼ˆ`computedTableHeight`, `computedPageSize`ï¼‰
- âœ… é¿å…åœ¨ template ä¸­ä½¿ç”¨å¤æ‚è¡¨è¾¾å¼
- âœ… ä½¿ç”¨è®¡ç®—å±æ€§å°è£…é€»è¾‘

**ä»£ç æ¨¡æ¿**:
```javascript
// âœ… æ¨èï¼šä½¿ç”¨è®¡ç®—å±æ€§
const visibleColumns = computed(() => 
  columns.value.filter(col => col.visible)
)

const hasSelection = computed(() => 
  selectedRows.value.length > 0
)

const canExecuteAction = computed(() => 
  !loading.value && hasSelection.value
)
```

---

### 8. äº‹ä»¶ç›‘å¬å™¨æ¨¡å¼ â­â­â­â­

**å‘ç°ä½ç½®**: `useTheme.js`

**ä¼˜ç§€ä¹‹å¤„**:
```javascript
// âœ… ä¼˜ç§€ç¤ºä¾‹ï¼šuseTheme.js
const listeners = new Set()

const notifyListeners = (event, data) => {
  listeners.forEach(listener => {
    try {
      listener(event, data)
    } catch (err) {
      console.warn('ä¸»é¢˜ç›‘å¬å™¨æ‰§è¡Œå¤±è´¥:', err)
    }
  })
}

const onThemeChange = (listener) => {
  listeners.add(listener)
  
  // è¿”å›å–æ¶ˆç›‘å¬çš„å‡½æ•°
  return () => {
    listeners.delete(listener)
  }
}
```

**ä¼˜ç‚¹åˆ†æ**:
1. âœ… **è§‚å¯Ÿè€…æ¨¡å¼**: æ¾è€¦åˆçš„äº‹ä»¶ç³»ç»Ÿ
2. âœ… **é”™è¯¯éš”ç¦»**: å•ä¸ªç›‘å¬å™¨é”™è¯¯ä¸å½±å“å…¶ä»–
3. âœ… **ä¾¿æ·å–æ¶ˆ**: è¿”å›å–æ¶ˆå‡½æ•°
4. âœ… **ä½¿ç”¨ Set**: è‡ªåŠ¨å»é‡

**åº”ç”¨å»ºè®®**:
- âœ… å¯ç”¨äº StandardTablePage äº‹ä»¶ç³»ç»Ÿ
- âœ… é€‚ç”¨äºéœ€è¦å¤šå¤„ç›‘å¬çš„åœºæ™¯
- âœ… æ›¿ä»£å…¨å±€äº‹ä»¶æ€»çº¿

**ä»£ç æ¨¡æ¿**:
```javascript
// âœ… äº‹ä»¶ç›‘å¬å™¨æ¨¡å¼
export function useEventEmitter() {
  const listeners = new Map()
  
  const on = (event, callback) => {
    if (!listeners.has(event)) {
      listeners.set(event, new Set())
    }
    listeners.get(event).add(callback)
    
    return () => {
      listeners.get(event)?.delete(callback)
    }
  }
  
  const emit = (event, data) => {
    listeners.get(event)?.forEach(callback => {
      try {
        callback(data)
      } catch (error) {
        console.warn(`Event listener error for "${event}":`, error)
      }
    })
  }
  
  return { on, emit }
}
```

---

## ğŸ“ åº”ç”¨åˆ° StandardTablePage çš„å»ºè®®

### ç«‹å³å®æ–½ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

#### 1. åˆ›å»º `useTableManagement` Composable

**ç›®æ ‡**: å°è£…è¡¨æ ¼é€šç”¨é€»è¾‘

```javascript
// composables/useTableManagement.js
export function useTableManagement(apiService) {
  const loading = ref(false)
  const tableData = ref([])
  const selectedRows = ref([])
  const currentPage = ref(1)
  const pageSize = ref(20)
  const total = ref(0)
  
  const loadData = async (params = {}) => {
    try {
      loading.value = true
      const result = await apiService.getList({
        page: currentPage.value,
        pageSize: pageSize.value,
        ...params
      })
      
      tableData.value = result.list || []
      total.value = result.total || 0
    } catch (error) {
      console.error('åŠ è½½æ•°æ®å¤±è´¥:', error)
      ElMessage.error('åŠ è½½æ•°æ®å¤±è´¥')
    } finally {
      loading.value = false
    }
  }
  
  const handlePageChange = (page) => {
    currentPage.value = page
    loadData()
  }
  
  const handleSizeChange = (size) => {
    pageSize.value = size
    currentPage.value = 1
    loadData()
  }
  
  const handleSelectionChange = (rows) => {
    selectedRows.value = rows
  }
  
  return {
    loading,
    tableData,
    selectedRows,
    currentPage,
    pageSize,
    total,
    loadData,
    handlePageChange,
    handleSizeChange,
    handleSelectionChange
  }
}
```

**ä½¿ç”¨ç¤ºä¾‹**:
```vue
<script setup>
import { useTableManagement } from '@/composables/useTableManagement'
import api from '@/api/myApi'

const {
  loading,
  tableData,
  selectedRows,
  currentPage,
  pageSize,
  total,
  loadData,
  handlePageChange,
  handleSizeChange,
  handleSelectionChange
} = useTableManagement(api)

onMounted(() => {
  loadData()
})
</script>
```

---

#### 2. å¢å¼ºäº‹ä»¶ç³»ç»Ÿ

**ç›®æ ‡**: æä¾›æ›´çµæ´»çš„äº‹ä»¶ç›‘å¬

```javascript
// StandardTablePage.vue
const eventListeners = new Map()

const on = (event, callback) => {
  if (!eventListeners.has(event)) {
    eventListeners.set(event, new Set())
  }
  eventListeners.get(event).add(callback)
  
  return () => {
    eventListeners.get(event)?.delete(callback)
  }
}

const emit = (event, data) => {
  eventListeners.get(event)?.forEach(callback => {
    try {
      callback(data)
    } catch (error) {
      console.warn(`Event error for "${event}":`, error)
    }
  })
}

// æš´éœ²ç»™çˆ¶ç»„ä»¶
defineExpose({
  on,
  emit,
  loadData,
  refresh
})
```

---

### è¿‘æœŸå®æ–½ï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰

#### 3. ä¸»é¢˜é›†æˆ

**ç›®æ ‡**: æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜

```vue
<!-- StandardTablePage.vue -->
<script setup>
import { useTheme } from '@/composables/useTheme'

const props = defineProps({
  // ... å…¶ä»– props
  theme: {
    type: String,
    default: 'default'
  },
  customColors: {
    type: Object,
    default: () => ({})
  }
})

const { themeColors, setTheme } = useTheme()

// åº”ç”¨ä¸»é¢˜
watch(() => props.theme, (newTheme) => {
  setTheme(newTheme)
}, { immediate: true })
</script>

<style scoped>
.standard-table-page {
  --primary-color: v-bind('themeColors.primary');
  --background-color: v-bind('themeColors.background');
  --text-color: v-bind('themeColors.text');
}
</style>
```

---

#### 4. å¼•å¯¼ç³»ç»Ÿé›†æˆ

**ç›®æ ‡**: æ–°ç”¨æˆ·å¼•å¯¼

```vue
<!-- StandardTablePage.vue -->
<script setup>
import { useTour } from '@/composables/useTour'

const props = defineProps({
  // ... å…¶ä»– props
  showTour: {
    type: Boolean,
    default: false
  },
  tourSteps: {
    type: Array,
    default: () => []
  }
})

const { startTour } = useTour()

watch(() => props.showTour, (show) => {
  if (show && props.tourSteps.length > 0) {
    startTour({
      steps: props.tourSteps,
      tourName: props.settingsKey
    })
  }
})
</script>
```

---

## ğŸ¨ ç»„ä»¶è®¾è®¡åŸåˆ™æ€»ç»“

### SOLID åŸåˆ™åœ¨ Vue ç»„ä»¶ä¸­çš„åº”ç”¨

| åŸåˆ™ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **S**ingle Responsibility | å•ä¸€èŒè´£ | Composable åªè´Ÿè´£ä¸€ä»¶äº‹ |
| **O**pen/Closed | å¼€é—­åŸåˆ™ | é€šè¿‡ props å’Œ slots æ‰©å±• |
| **L**iskov Substitution | é‡Œæ°æ›¿æ¢ | ç»„ä»¶å¯äº’æ¢ä½¿ç”¨ |
| **I**nterface Segregation | æ¥å£éš”ç¦» | ç»†ç²’åº¦çš„ composable |
| **D**ependency Inversion | ä¾èµ–å€’ç½® | ä½¿ç”¨ inject/provide |

---

### Vue 3 æœ€ä½³å®è·µ

#### 1. Composition API ä¼˜äº Options API

```javascript
// âœ… æ¨èï¼šComposition API
<script setup>
import { ref, computed, onMounted } from 'vue'

const count = ref(0)
const doubleCount = computed(() => count.value * 2)
</script>

// âŒ ä¸æ¨èï¼šOptions API
<script>
export default {
  data() {
    return { count: 0 }
  },
  computed: {
    doubleCount() {
      return this.count * 2
    }
  }
}
</script>
```

---

#### 2. Reactive vs Ref

```javascript
// âœ… æ¨èï¼šåŸºç¡€ç±»å‹ç”¨ ref
const count = ref(0)
const name = ref('John')

// âœ… æ¨èï¼šå¯¹è±¡ç”¨ reactive
const user = reactive({
  id: 1,
  name: 'John',
  email: 'john@example.com'
})

// âŒ ä¸æ¨èï¼šå¯¹è±¡ç”¨ ref
const user = ref({
  id: 1,
  name: 'John'
})
```

---

#### 3. Props å®šä¹‰å®Œæ•´æ€§

```javascript
// âœ… æ¨èï¼šå®Œæ•´çš„ props å®šä¹‰
const props = defineProps({
  modelValue: {
    type: String,
    required: true,
    validator: (value) => value.length > 0
  },
  size: {
    type: String,
    default: 'medium',
    validator: (value) => ['small', 'medium', 'large'].includes(value)
  },
  disabled: {
    type: Boolean,
    default: false
  }
})

// âŒ ä¸æ¨èï¼šç®€å•æ•°ç»„å®šä¹‰
const props = defineProps(['modelValue', 'size', 'disabled'])
```

---

## ğŸš€ å®æ–½è·¯çº¿å›¾

### ç¬¬ä¸€é˜¶æ®µï¼ˆç«‹å³å¼€å§‹ï¼‰âœ…

- [x] åˆ›å»º `useResponsive` composableï¼ˆå·²å®Œæˆï¼‰
- [ ] åˆ›å»º `useTableManagement` composable
- [ ] åˆ›å»º `useFormValidation` composable
- [ ] å®Œå–„ StandardTablePage äº‹ä»¶ç³»ç»Ÿ

**é¢„è®¡æ—¶é—´**: 4å°æ—¶

---

### ç¬¬äºŒé˜¶æ®µï¼ˆæœ¬å‘¨å†…ï¼‰

- [ ] åˆ›å»º `useTheme` composable
- [ ] åˆ›å»º `useDataExport` composable
- [ ] åˆ›å»º `useTour` composable
- [ ] é›†æˆä¸»é¢˜ç³»ç»Ÿåˆ° StandardTablePage

**é¢„è®¡æ—¶é—´**: 8å°æ—¶

---

### ç¬¬ä¸‰é˜¶æ®µï¼ˆä¸‹å‘¨ï¼‰

- [ ] åˆ›å»ºé€šç”¨ä¸šåŠ¡ç»„ä»¶åº“
- [ ] åˆ›å»ºå›¾è¡¨ç»„ä»¶åº“
- [ ] åˆ›å»ºå¼•å¯¼ç³»ç»Ÿ
- [ ] å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹

**é¢„è®¡æ—¶é—´**: 16å°æ—¶

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

1. `StandardTablePage_v2.1ä¼˜åŒ–å®ŒæˆæŠ¥å‘Š.md` (409è¡Œ)
2. `ä¸‰å¤§é¡µé¢è¿ç§»åˆ°StandardTablePage_v2.1æŠ¥å‘Š.md` (438è¡Œ)
3. `é€šç”¨ç»„ä»¶ä¼˜åŒ–å»ºè®®ä¸å¯å¸æ”¶ä¼˜ç‚¹åˆ†ææŠ¥å‘Š.md` (æœ¬æ–‡æ¡£)

---

## ğŸ‰ æ€»ç»“

### æ ¸å¿ƒä»·å€¼

ä»28ä¸ªé€šç”¨ç»„ä»¶ä¸­æå–äº†8ä¸ªä¼˜ç§€è®¾è®¡æ¨¡å¼ï¼š

1. âœ… **Composable æ¨¡å¼** - å¤ç”¨é€»è¾‘
2. âœ… **äº‹ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†** - é¿å…å†…å­˜æ³„æ¼
3. âœ… **é”™è¯¯å¤„ç†ä¸åŠ è½½çŠ¶æ€** - ç”¨æˆ·ä½“éªŒä¼˜åŒ–
4. âœ… **é…ç½®å¯¹è±¡æ¨¡å¼** - æ¸…æ™°çš„é»˜è®¤å€¼
5. âœ… **æœ¬åœ°å­˜å‚¨æŒä¹…åŒ–** - è·¨ä¼šè¯ä¿å­˜è®¾ç½®
6. âœ… **æ¸è¿›å¢å¼ºç­–ç•¥** - å‘åå…¼å®¹
7. âœ… **è®¡ç®—å±æ€§ä¼˜åŒ–** - æ€§èƒ½æå‡
8. âœ… **äº‹ä»¶ç›‘å¬å™¨æ¨¡å¼** - æ¾è€¦åˆæ¶æ„

### é¢„æœŸæ”¶ç›Š

- **ä»£ç å¤ç”¨æ€§**: â†‘ 60%
- **å¼€å‘æ•ˆç‡**: â†‘ 40%
- **ä»£ç è´¨é‡**: â†‘ 50%
- **ç»´æŠ¤æˆæœ¬**: â†“ 30%

---

ğŸ“… **å®Œæˆæ—¶é—´**: 2025-12-08  
ğŸ“ **çŠ¶æ€**: åˆ†æå®Œæˆï¼Œå¾…å®æ–½  
âœ… **æ¨è**: ä¼˜å…ˆå®æ–½ useTableManagement composable
