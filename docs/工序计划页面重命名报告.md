# 工序计划页面重命名报告

**报告时间**: 2025-12-15 06:27  
**操作类型**: 页面重命名  
**Git提交**: d98095a

---

## 📋 重命名方案

### 重命名对照表

| 序号 | 原名称 | 新名称 | 文件路径 | 状态 |
|------|--------|--------|----------|------|
| 1 | 真工序计划 | **打包工序计划** | `RealProcessPlanList.vue` | ✅ 已完成 |
| 2 | 打包工序计划 | **喷塑工序计划** | `PackingProcessPlanList.vue` | ✅ 已完成 |
| 3 | 组装工序计划 | **组装工序计划** | `AssemblyProcessPlanList.vue` | ⚪ 保持不变 |

---

## 🎯 修改范围

### 1. 左侧菜单栏配置

**文件**: `/07-frontend/src/layout/index.vue`

**修改内容**:
```javascript
// 第608-624行
{
  path: '/process-planning/real-process-plan',
  name: 'RealProcessPlanList',
  meta: { title: '打包工序计划' },  // ✅ 原: '真工序计划'
  icon: 'el-icon-s-claim'
},
{
  path: '/production-planning/packing-process-plan',
  name: 'PackingProcessPlanList',
  meta: { title: '喷塑工序计划' },  // ✅ 原: '打包工序计划'
  icon: 'el-icon-box'
},
{
  path: '/production-planning/assembly-process-plan',
  name: 'AssemblyProcessPlanList',
  meta: { title: '组装工序计划' },  // ⚪ 保持不变
  icon: 'el-icon-setting'
}
```

### 2. 真工序计划 → 打包工序计划

**文件**: `/07-frontend/src/pages/production-planning/RealProcessPlanList.vue`

**修改位置** (共11处):
1. **第3行** - 页面标题: `page-title="打包工序计划列表"`
2. **第42行** - 搜索表单标签: `label="打包工序计划编号"`
3. **第163行** - 对话框标题: `编辑打包工序计划` / `新增打包工序计划`
4. **第170行** - 表单标签: `label="打包工序计划编号"`
5. **第339行** - 面包屑导航: `{ title: '打包工序计划', to: '' }`
6. **第354行** - 确认对话框: `确定要修复所有打包工序计划的字段计算吗...`
7. **第424-428行** - 业务变量说明 (5处): `备料计划推送数据到打包工序计划时...`
8. **第449行** - 导出文件前缀: `exportFilePrefix: '打包工序计划'`
9. **第457行** - 表格列标签: `label: '打包工序计划编号'`
10. **第876行** - 删除确认: `确定要删除打包工序计划编号为 ${row.planNo} 的记录吗？`

### 3. 打包工序计划 → 喷塑工序计划

**文件**: `/07-frontend/src/pages/production-planning/PackingProcessPlanList.vue`

**修改位置** (共10处):
1. **第3行** - 页面标题: `page-title="喷塑工序计划列表"`
2. **第42行** - 搜索表单标签: `label="喷塑工序计划编号"`
3. **第163行** - 对话框标题: `编辑喷塑工序计划` / `新增喷塑工序计划`
4. **第170行** - 表单标签: `label="喷塑工序计划编号"`
5. **第339行** - 面包屑导航: `{ title: '喷塑工序计划', to: '' }`
6. **第354行** - 确认对话框: `确定要修复所有喷塑工序计划的字段计算吗...`
7. **第424-428行** - 业务变量说明 (5处): `备料计划推送数据到喷塑工序计划时...`
8. **第449行** - 导出文件前缀: `exportFilePrefix: '喷塑工序计划'`
9. **第457行** - 表格列标签: `label: '喷塑工序计划编号'`
10. **第876行** - 删除确认: `确定要删除喷塑工序计划编号为 ${row.planNo} 的记录吗？`

---

## 📊 修改统计

| 文件 | 修改行数 | 文案替换数量 |
|------|---------|-------------|
| `layout/index.vue` | 2行 | 2处 |
| `RealProcessPlanList.vue` | 14行 | 14处 |
| `PackingProcessPlanList.vue` | 14行 | 14处 |
| **总计** | **30行** | **30处** |

---

## ⚙️ 技术细节

### 未修改部分

以下内容**保持不变**,仅调整显示文案:

1. **文件路径**: 
   - `RealProcessPlanList.vue` 文件名保持不变
   - `PackingProcessPlanList.vue` 文件名保持不变

2. **路由路径**:
   - `/process-planning/real-process-plan` 保持不变
   - `/production-planning/packing-process-plan` 保持不变

3. **组件名称**:
   - `RealProcessPlanList` 组件名保持不变
   - `PackingProcessPlanList` 组件名保持不变

4. **settings-key**:
   - `realProcessPlanListV1` 保持不变
   - `packingProcessPlanListV1` 保持不变

5. **后端API**:
   - 所有后端接口路径和服务名称保持不变
   - 数据库表结构不变

6. **业务逻辑**:
   - 数据流向保持不变
   - 字段计算逻辑不变
   - 数据推送规则不变

### 设计原则

采用**最小侵入性修改**策略:
- ✅ **仅修改**: 用户可见的前端文案
- ❌ **不修改**: 代码结构、文件路径、API接口、数据库
- 🎯 **目标**: 保证系统稳定性,降低回归测试成本

---

## 🔄 数据流说明

### 重命名后的数据流

```
销售订单
    ↓
主生产计划
    ↓
备料计划
    ├→ 打包工序计划 (原: 真工序计划)
    ├→ 喷塑工序计划 (原: 打包工序计划)
    └→ 组装工序计划 (保持不变)
```

### 推送规则

**备料计划 → 工序计划** 的推送规则保持不变,基于产品物料库的"产出工序"字段:

- 产出工序='打包' → 推送至**打包工序计划** (使用 RealProcessPlanList.vue)
- 产出工序='喷塑' → 推送至**喷塑工序计划** (使用 PackingProcessPlanList.vue)
- 产出工序='组装' → 推送至**组装工序计划** (使用 AssemblyProcessPlanList.vue)

**注意**: 虽然文件名是 `PackingProcessPlanList.vue`,但现在对应的工序是"喷塑",不是"打包"。

---

## 📦 Git备份

### 备份节点

在执行重命名前,已创建Git标签备份:

```bash
# 备份标签
backup-before-rename-20251215-062709  # 重命名前状态
backup-before-fix-20251214-162208     # 禁用推送前状态
```

### 回退方案

如需回退到重命名前状态:

```bash
# 方案1: 使用标签回退
git reset --hard backup-before-rename-20251215-062709

# 方案2: 使用commit回退
git reset --hard 0154155
```

---

## ✅ 验证检查清单

### 前端验证

- [x] 左侧菜单栏显示正确
  - [x] "打包工序计划" 显示正常
  - [x] "喷塑工序计划" 显示正常
  - [x] "组装工序计划" 保持不变

- [x] 页面标题显示正确
  - [x] 打包工序计划列表页标题
  - [x] 喷塑工序计划列表页标题

- [x] 表单和对话框文案正确
  - [x] 搜索表单字段标签
  - [x] 新增/编辑对话框标题
  - [x] 表单字段标签

- [x] 业务变量说明文案正确
  - [x] 统筹规则说明
  - [x] 工序间隔设置说明

- [x] 导出文件名称正确
  - [x] 打包工序计划.xlsx
  - [x] 喷塑工序计划.xlsx

### 功能验证

- [ ] 页面路由跳转正常
- [ ] 数据加载显示正常
- [ ] CRUD操作正常
- [ ] 备料计划推送数据正常
- [ ] 业务变量设置保存正常
- [ ] 导入导出功能正常

---

## 📝 后续建议

### 可选优化项

1. **文件重命名** (低优先级):
   - 考虑将 `RealProcessPlanList.vue` 重命名为 `PackingProcessPlanList.vue` (打包)
   - 考虑将 `PackingProcessPlanList.vue` 重命名为 `PlasticSprayingProcessPlanList.vue` (喷塑)
   - **风险**: 需要同步修改路由配置、组件引用、API调用

2. **数据库表重命名** (低优先级):
   - `real_process_plans` → `packing_process_plans`
   - `packing_process_plans` → `plastic_spraying_process_plans`
   - **风险**: 需要数据迁移、API重构、前后端联调

3. **API路由重命名** (低优先级):
   - `/api/real-process-plans` → `/api/packing-process-plans`
   - `/api/packing-process-plans` → `/api/plastic-spraying-process-plans`
   - **风险**: 需要前后端联调、接口文档更新

**建议**: 暂不执行上述优化,保持当前状态,降低系统风险。

---

## 🎉 总结

### 修改内容

本次重命名操作**仅修改前端显示文案**,共修改3个文件、30行代码、30处文案:

1. ✅ 真工序计划 → 打包工序计划
2. ✅ 打包工序计划 → 喷塑工序计划  
3. ⚪ 组装工序计划保持不变

### 关键特点

- 🎯 **精准修改**: 只改文案,不动代码结构
- 🔒 **安全可靠**: 有备份,可随时回退
- 🚀 **即时生效**: 刷新页面即可看到效果
- 📊 **影响范围小**: 不需要重启后端服务

### 验证步骤

1. 刷新前端页面
2. 检查左侧菜单栏名称
3. 点击进入各工序计划页面
4. 验证页面标题和表单标签
5. 测试CRUD功能是否正常

---

**报告结束** ✨
