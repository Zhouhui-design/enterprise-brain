# 页面空白问题修复说明

## 问题描述
从左侧菜单点击目标页面按钮后，页面显示空白，需要手动刷新（F5）才能看到内容。

## 问题原因
Vue Router在路由切换时，如果组件被复用（相同的组件实例），不会触发组件的生命周期钩子（mounted、created等），导致数据不加载，页面显示空白。

## 解决方案
在`<router-view>`和`<component>`上添加`:key="$route.fullPath"`属性，强制Vue在路由变化时重新创建组件实例。

## 修改文件
`/07-frontend/src/layout/index.vue`

## 修改内容

### 修改前
```vue
<router-view v-slot="{ Component }">
  <transition name="fade" mode="out-in">
    <component :is="Component" />
  </transition>
</router-view>
```

### 修改后
```vue
<router-view v-slot="{ Component }" :key="$route.fullPath">
  <transition name="fade" mode="out-in">
    <component :is="Component" :key="$route.fullPath" />
  </transition>
</router-view>
```

## 工作原理
- `:key="$route.fullPath"` 会在路由变化时生成不同的key值
- Vue检测到key变化后，会销毁旧组件并创建新组件
- 新组件的生命周期钩子会正常触发，数据会重新加载

## 测试方法
1. 清除浏览器缓存（Ctrl+Shift+Delete）
2. 刷新页面（F5）
3. 点击左侧菜单的任意页面
4. 验证页面内容是否立即显示（无需手动刷新）

## 测试场景
- ✅ 备料计划 → 工序计划
- ✅ 工序计划 → 备料计划  
- ✅ 任意页面 → 任意页面

## 注意事项
- 这个修改会导致每次路由切换都重新创建组件
- 失去了组件缓存的性能优化
- 但确保了数据的正确加载和显示
- 对于管理系统来说，数据准确性比性能更重要

## 副作用
- 页面切换时会有轻微的性能开销（组件重新创建）
- 页面状态不会被保留（如滚动位置、表单输入等）

## 如果问题仍然存在
如果修改后问题仍然存在，请检查：
1. 浏览器是否已清除缓存
2. 前端服务是否已重启
3. 控制台是否有JavaScript错误

---

**修复时间**: 2025-12-08 15:27
**修复方式**: 添加路由key强制组件重新渲染
**影响范围**: 所有页面路由跳转
**状态**: ✅ 已修复
