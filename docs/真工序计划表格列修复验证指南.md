# 🚀 快速验证指南

## 真工序计划页面表格列不显示问题 - 修复验证

---

## ✅ 修复已完成

修复内容：修改了`PageSettings`组件的字段初始化逻辑，优先使用代码定义的`visible`属性，而不是localStorage中的配置。

**修改文件**：
- `/07-frontend/src/components/common/PageSettings.vue`（第396-417行）

---

## 🧪 验证步骤（推荐）

### 方法1：直接刷新页面（最简单）

1. **打开页面**：`http://localhost:3003/production-planning/real-process-plan`
2. **强制刷新**：按`Ctrl + Shift + R`（Windows/Linux）或`Cmd + Shift + R`（Mac）
3. **检查结果**：表格应该显示所有字段

**预期结果**：
- ✅ 应该看到41个默认可见的字段
- ✅ 表格数据正常显示
- ✅ 菜单和操作按钮正常

---

### 方法2：清除localStorage（如果方法1无效）

1. **打开页面**：`http://localhost:3003/production-planning/real-process-plan`
2. **打开开发者工具**：按`F12`
3. **切换到Console**：点击"Console"标签
4. **执行以下代码**：
   ```javascript
   localStorage.removeItem('realProcessPlanListV1')
   location.reload()
   ```

**预期结果**：页面刷新后，所有默认可见字段应正常显示。

---

## 🔍 检查控制台日志（可选）

打开浏览器控制台（F12 → Console），查找以下日志：

```
✅ 字段列表初始化: {
  总数: 47,
  可见: 41,
  使用代码定义: true,
  使用localStorage: false
}
```

**日志说明**：
- `总数: 47` - 真工序计划共有47个字段
- `可见: 41` - 默认显示41个字段
- `使用代码定义: true` - ✅ 正在使用代码定义的默认值
- `使用localStorage: false` - ✅ 已忽略localStorage的错误配置

---

## 📋 字段清单

### 默认可见字段（41个）

1. 序号
2. 真工序计划编号（左固定）
3. 销售订单编号
4. 客户订单编号
5. 主生产计划编号
6. 主计划产品编号
7. 主计划产品名称
8. 发货计划编号
9. 生产产品编号
10. 生产产品名称
11. 产品图片
12. 工序负责人
13. 工序名称
14. 计划排程日期
15. 当天总工时
16. 当天已排程工时
17. 工序当天可用工时
18. 计划排程工时
19. 计划排程数量
20. 产品单位
21. 0阶需求数量
22. 计划完工日期
23. 订单承诺交期
24. 计划开始日期
25. 真计划开始日期
26. 计划结束日期
27. 下一个排程日期
28. 车间名称
29. 排程次数
30. 定时工额
31. 定额工时
32. 需求工时
33. 剩余需求工时
34. 累积排程数量
35. 未排数量
36. 进度状态
37. 需补货数量
38. 来源编号
39. 客户名称
40. 生产BOM编号
41. 层阶地址
42. BOM详情
43. 提交人
44. 提交时间

### 默认隐藏字段（6个）

1. 来源页面名称
2. 上一个排程单号
3. 0阶产品名称
4. 0阶产品编号
5. 0阶主计划生产数量
6. 产品来源

**提示**：隐藏字段可以通过页面右上角的"设置"按钮打开页面设置对话框查看和调整。

---

## ❓ 如果问题仍然存在

如果执行了上述步骤后，表格列仍然不显示，请：

1. **检查浏览器缓存**：尝试使用无痕模式打开页面
2. **检查前端服务**：确认Vite开发服务器正在运行
3. **查看控制台错误**：查看是否有JavaScript错误
4. **联系支持**：提供浏览器控制台的日志截图

---

## 🎯 修复原理简述

**问题原因**：localStorage中存储了旧的列配置，导致所有字段被错误地设置为不可见。

**修复方案**：修改`PageSettings`组件，优先使用代码中定义的`visible`属性，而不是localStorage的配置。

**修复效果**：
- ✅ 代码定义的默认值优先级最高
- ✅ localStorage配置错误不影响基本功能
- ✅ 用户仍可通过页面设置调整列显示

---

**完整技术报告**：请查看`/docs/真工序计划页面表格列不显示问题永久修复.md`

---

**修复时间**：2025-12-13  
**验证状态**：待确认
