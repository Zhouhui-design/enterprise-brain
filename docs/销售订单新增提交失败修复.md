# 销售订单新增提交失败修复

## 问题描述
在订单列表页面点击"新增"，录入信息后点击"提交"，失败并返回500错误。

## 错误信息
```
❌ 创建订单失败: ReferenceError: quotation_no is not defined
    at /home/sardenesy/ai_workspaces/ai_desktop_3/backend/routes/salesOrders.js:327:39
```

## 问题原因
变量名命名不一致：
- 第257行解构时使用驼峰命名：`quotationNo`
- 第327行使用时使用下划线命名：`quotation_no`

## 修复内容
修改文件：`/backend/routes/salesOrders.js` 第327行

### 修改前
```javascript
salesperson || null, 'admin', quotation_no || null, orderType || null,
```

### 修改后
```javascript
salesperson || null, 'admin', quotationNo || null, orderType || null,
```

## 修复操作
1. ✅ 修复变量名：`quotation_no` → `quotationNo`
2. ✅ 重启后端服务

## 测试步骤
1. 访问订单列表页面：`http://localhost:3002/sales/orders/list`
2. 点击"新增"按钮
3. 录入订单信息：
   - 客户名称（必填）
   - 客户订单编号
   - 产品信息
   - 其他信息
4. 点击"提交"按钮
5. 验证：
   - ✅ 提交成功，无500错误
   - ✅ 订单保存到数据库
   - ✅ 页面跳转回订单列表
   - ✅ 新订单显示在列表中

## 注意事项
这是一个典型的变量命名不一致错误，在开发时要注意：
- 前端通常使用驼峰命名（camelCase）：`quotationNo`
- 数据库字段使用下划线命名（snake_case）：`quotation_no`
- 在代码中要统一使用驼峰命名，只在SQL语句中使用下划线命名

---

**修复时间**: 2025-12-08 15:26
**错误类型**: 变量名不一致
**影响范围**: 销售订单新增功能
**状态**: ✅ 已修复
