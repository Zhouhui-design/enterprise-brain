-- 创建企业日历表
DROP TABLE IF EXISTS `company_calendar`;
CREATE TABLE `company_calendar` (
  `id` int NOT NULL AUTO_INCREMENT COMMENT '主键ID',
  `calendar_date` date NOT NULL COMMENT '日期',
  `actual_date` date DEFAULT NULL COMMENT '真日期（日期+1天）',
  `weekday` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '星期',
  `is_workday` tinyint DEFAULT '1' COMMENT '休息/上班（0-休息，1-上班）',
  `standard_work_hours` decimal(4,2) DEFAULT '8.00' COMMENT '标准上班时长（小时）',
  `adjusted_work_hours` decimal(4,2) DEFAULT NULL COMMENT '调整后工时（小时）',
  `is_adjusted` tinyint DEFAULT '0' COMMENT '是否调整工时（0-否，1-是）',
  `holiday_name` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '节假日名称',
  `remark` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `updated_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `calendar_date` (`calendar_date`),
  KEY `idx_calendar_date` (`calendar_date`),
  KEY `idx_is_workday` (`is_workday`),
  KEY `idx_weekday` (`weekday`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='企业日历表';

-- 插入未来120天的日历数据（2025-12-19起）
INSERT INTO `company_calendar` (calendar_date, actual_date, weekday, is_workday, standard_work_hours) VALUES
('2025-12-19','2025-12-20','星期五',1,8.00),
('2025-12-20','2025-12-21','星期六',1,8.00),
('2025-12-21','2025-12-22','星期日',0,0.00),
('2025-12-22','2025-12-23','星期一',1,8.00),
('2025-12-23','2025-12-24','星期二',1,8.00),
('2025-12-24','2025-12-25','星期三',1,8.00),
('2025-12-25','2025-12-26','星期四',1,8.00),
('2025-12-26','2025-12-27','星期五',1,8.00),
('2025-12-27','2025-12-28','星期六',1,8.00),
('2025-12-28','2025-12-29','星期日',0,0.00),
('2025-12-29','2025-12-30','星期一',1,8.00),
('2025-12-30','2025-12-31','星期二',1,8.00),
('2025-12-31','2026-01-01','星期三',1,8.00),
('2026-01-01','2026-01-02','星期四',1,8.00),
('2026-01-02','2026-01-03','星期五',1,8.00),
('2026-01-03','2026-01-04','星期六',1,8.00),
('2026-01-04','2026-01-05','星期日',0,0.00),
('2026-01-05','2026-01-06','星期一',1,8.00),
('2026-01-06','2026-01-07','星期二',1,8.00),
('2026-01-07','2026-01-08','星期三',1,8.00),
('2026-01-08','2026-01-09','星期四',1,8.00),
('2026-01-09','2026-01-10','星期五',1,8.00),
('2026-01-10','2026-01-11','星期六',1,8.00),
('2026-01-11','2026-01-12','星期日',0,0.00),
('2026-01-12','2026-01-13','星期一',1,8.00),
('2026-01-13','2026-01-14','星期二',1,8.00),
('2026-01-14','2026-01-15','星期三',1,8.00),
('2026-01-15','2026-01-16','星期四',1,8.00),
('2026-01-16','2026-01-17','星期五',1,8.00),
('2026-01-17','2026-01-18','星期六',1,8.00),
('2026-01-18','2026-01-19','星期日',0,0.00);
