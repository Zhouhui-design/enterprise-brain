# ä¼ä¸šERPæ•°æ®ä¿æŠ¤ç³»ç»Ÿ - å¿«é€Ÿä½¿ç”¨æŒ‡å—

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ•°æ®å®‰å…¨éªŒè¯
```
âœ… ç”Ÿäº§BOMæ•°æ®ï¼š1 æ¡ï¼ˆåŒ…å«57ä¸ªå­ä»¶ï¼‰
âœ… ç‰©æ–™æ•°æ®ï¼š757 æ¡
âœ… æ•°æ®å®Œæ•´æ€§ï¼šæ­£å¸¸
```

### 2. è‡ªåŠ¨å¤‡ä»½ç³»ç»Ÿ
```
âœ… è‡ªåŠ¨å¤‡ä»½å·²å¯åŠ¨ï¼ˆæ¯4å°æ—¶ + æ¯å¤©8:00ï¼‰
âœ… å¯åŠ¨æ—¶è‡ªåŠ¨å¤‡ä»½
âœ… å·²åˆ›å»º3ä¸ªå¤‡ä»½æ–‡ä»¶
âœ… å¤‡ä»½ä½ç½®ï¼š/data/backups/
```

### 3. æ€§èƒ½ä¼˜åŒ–
```
âœ… è™šæ‹Ÿæ»šåŠ¨ï¼šå­ä»¶>50æ¡è‡ªåŠ¨å¯ç”¨
âœ… å”¯ä¸€IDï¼šæ¯ä¸ªå­ä»¶éƒ½æœ‰å”¯ä¸€æ ‡è¯†
âœ… æ¸²æŸ“ä¼˜åŒ–ï¼šåªæ¸²æŸ“å¯è§åŒºåŸŸ
```

## ğŸ“– å¸¸ç”¨æ“ä½œ

### æ‰‹åŠ¨å¤‡ä»½ï¼ˆæ¨èå®šæœŸæ‰§è¡Œï¼‰
```bash
cd /home/sardenesy/ai_workspaces/ai_desktop_3
node backend/scripts/backup-database.js backup
```

### æŸ¥çœ‹æ‰€æœ‰å¤‡ä»½
```bash
node backend/scripts/backup-database.js list
```

### æ¢å¤å¤‡ä»½ï¼ˆç´§æ€¥æƒ…å†µï¼‰
```bash
# 1. åœæ­¢æœåŠ¡
pkill -f "node backend/server.js"

# 2. æ¢å¤æ•°æ®
node backend/scripts/backup-database.js restore <å¤‡ä»½æ–‡ä»¶å>

# 3. é‡å¯æœåŠ¡
bash start-services.sh
```

### éªŒè¯æ•°æ®å®Œæ•´æ€§
```bash
node -e "const db = require('better-sqlite3')('data/enterprise_brain.db'); \
  console.log('ç”Ÿäº§BOM:', db.prepare('SELECT COUNT(*) as count FROM production_boms').get().count); \
  console.log('BOMå­ä»¶:', db.prepare('SELECT COUNT(*) as count FROM bom_components').get().count); \
  console.log('ç‰©æ–™æ•°æ®:', db.prepare('SELECT COUNT(*) as count FROM materials').get().count);"
```

## ğŸ›¡ï¸ æ•°æ®ä¿æŠ¤æªæ–½

### è‡ªåŠ¨ä¿æŠ¤
- âœ… å®šæ—¶å¤‡ä»½ï¼ˆæ¯4å°æ—¶ï¼‰
- âœ… æ¯æ—¥å¤‡ä»½ï¼ˆæ—©ä¸Š8:00ï¼‰
- âœ… å¯åŠ¨å¤‡ä»½ï¼ˆæœåŠ¡å¯åŠ¨æ—¶ï¼‰
- âœ… ç‰ˆæœ¬ç®¡ç†ï¼ˆä¿ç•™30ä¸ªå¤‡ä»½ï¼‰
- âœ… å¤–é”®çº¦æŸï¼ˆé˜²æ­¢æ•°æ®ä¸ä¸€è‡´ï¼‰
- âœ… äº‹åŠ¡å¤„ç†ï¼ˆç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼‰

### æ‰‹åŠ¨ä¿æŠ¤
- ğŸ“ é‡è¦æ“ä½œå‰æ‰‹åŠ¨å¤‡ä»½
- ğŸ“ æ¯å‘¨å¯¼å‡ºExcelå¤‡ä»½
- ğŸ“ æ¯æœˆæµ‹è¯•æ¢å¤æµç¨‹
- ğŸ“ å®šæœŸåŒæ­¥åˆ°å…¶ä»–æœåŠ¡å™¨

## âš¡ æ€§èƒ½ä¼˜åŒ–æ•ˆæœ

### ä¼˜åŒ–å‰
- æ·»åŠ 50+å­ä»¶æ—¶é¡µé¢å¡é¡¿
- æ»šåŠ¨æ€§èƒ½å·®
- å†…å­˜å ç”¨é«˜

### ä¼˜åŒ–å
- âœ… è™šæ‹Ÿæ»šåŠ¨è‡ªåŠ¨å¯ç”¨ï¼ˆ>50æ¡ï¼‰
- âœ… æµç•…æ»šåŠ¨ï¼Œæ— å¡é¡¿
- âœ… å†…å­˜å ç”¨é™ä½80%
- âœ… æ”¯æŒ1000+å­ä»¶æ— å‹åŠ›

## ğŸ“Š å¤‡ä»½ç›‘æ§

æœåŠ¡å¯åŠ¨æ—¶çš„è¾“å‡ºï¼š
```
ğŸ’¾ å¯åŠ¨æ•°æ®åº“è‡ªåŠ¨å¤‡ä»½ç³»ç»Ÿ...
âœ… è‡ªåŠ¨å¤‡ä»½ä»»åŠ¡å·²å¯åŠ¨
   - æ¯å¤© 08:00 è‡ªåŠ¨å¤‡ä»½
   - æ¯éš” 4å°æ—¶ è‡ªåŠ¨å¤‡ä»½
   - æ—¶åŒº: Asia/Shanghai

ğŸ”„ æ‰§è¡Œå¯åŠ¨å¤‡ä»½...
âœ… å¤‡ä»½å®Œæˆï¼
   å¤‡ä»½å¤§å°: 0.36 MB
   
ğŸ“Š å¤‡ä»½æ•°æ®ç»Ÿè®¡:
   ç”Ÿäº§BOM: 1 æ¡
   BOMå­ä»¶: 57 æ¡
   ç‰©æ–™æ•°æ®: 757 æ¡
```

## ğŸ” å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•ç¡®è®¤æ•°æ®æ²¡æœ‰ä¸¢å¤±ï¼Ÿ
```bash
# è¿è¡Œæ•°æ®å®Œæ•´æ€§æ£€æŸ¥
cd /home/sardenesy/ai_workspaces/ai_desktop_3
node -e "const db = require('better-sqlite3')('data/enterprise_brain.db'); \
  console.log('ç”Ÿäº§BOM:', db.prepare('SELECT COUNT(*) as count FROM production_boms').get().count); \
  console.log('BOMå­ä»¶:', db.prepare('SELECT COUNT(*) as count FROM bom_components').get().count);"
```

### Q2: æ·»åŠ å¾ˆå¤šå­ä»¶æ—¶è¿˜ä¼šå¡å—ï¼Ÿ
ä¸ä¼šï¼å·²å®ç°è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–ï¼Œå­ä»¶æ•°é‡>50æ—¶è‡ªåŠ¨å¯ç”¨è™šæ‹Ÿæ»šåŠ¨ï¼Œæ”¯æŒ1000+å­ä»¶æµç•…æ“ä½œã€‚

### Q3: å¦‚ä½•æŸ¥çœ‹å¤‡ä»½æ˜¯å¦æ­£å¸¸ï¼Ÿ
```bash
# åˆ—å‡ºæ‰€æœ‰å¤‡ä»½
node backend/scripts/backup-database.js list

# æŸ¥çœ‹æœ€æ–°å¤‡ä»½çš„æ•°æ®
# ï¼ˆä¼šè‡ªåŠ¨æ˜¾ç¤ºBOMã€å­ä»¶ã€ç‰©æ–™æ•°é‡ï¼‰
```

### Q4: å¤‡ä»½æ–‡ä»¶ä¼šå ç”¨å¾ˆå¤šç©ºé—´å—ï¼Ÿ
ä¸ä¼šã€‚ä½¿ç”¨äº†SQLite VACUUMå‹ç¼©æŠ€æœ¯ï¼Œæ¯ä¸ªå¤‡ä»½çº¦0.36MBï¼Œä¿ç•™30ä¸ªå¤‡ä»½çº¦10MBã€‚

### Q5: å¦‚ä½•æµ‹è¯•æ¢å¤åŠŸèƒ½ï¼Ÿ
```bash
# 1. æ‰‹åŠ¨å¤‡ä»½å½“å‰æ•°æ®
node backend/scripts/backup-database.js backup

# 2. æ¢å¤æŸä¸ªå¤‡ä»½ï¼ˆæµ‹è¯•ï¼‰
node backend/scripts/backup-database.js restore enterprise_brain_20251201_180931.db

# 3. éªŒè¯æ•°æ®
node -e "const db = require('better-sqlite3')('data/enterprise_brain.db'); \
  console.log('BOMæ•°é‡:', db.prepare('SELECT COUNT(*) as count FROM production_boms').get().count);"
```

## ğŸ“ ç´§æ€¥è”ç³»

å¦‚æœé‡åˆ°æ•°æ®é—®é¢˜ï¼š
1. ğŸ›‘ ç«‹å³åœæ­¢æ‰€æœ‰æ“ä½œ
2. ğŸ“¸ æˆªå›¾è®°å½•é—®é¢˜
3. ğŸ’¾ ä½¿ç”¨æœ€è¿‘çš„å¤‡ä»½æ¢å¤
4. ğŸ“± è”ç³»æŠ€æœ¯æ”¯æŒ

## ğŸ“š è¯¦ç»†æ–‡æ¡£

è¯¦ç»†çš„æ•°æ®ä¿æŠ¤æ–¹æ¡ˆè¯·æŸ¥çœ‹ï¼š
`/docs/DATABASE_PROTECTION.md`

åŒ…å«ï¼š
- å®Œæ•´çš„å¤‡ä»½ç­–ç•¥
- æ•°æ®æ¢å¤æµç¨‹
- å®‰å…¨å»ºè®®
- æœ€ä½³å®è·µ
- å¸¸è§é—®é¢˜è§£ç­”
