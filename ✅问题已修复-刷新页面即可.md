# âœ… å¤‡æ–™è®¡åˆ’å‰ç«¯æ˜¾ç¤ºé—®é¢˜å·²ä¿®å¤

## ğŸ¯ é—®é¢˜æ ¹å› 

### æ•°æ®æµåˆ†æï¼š

```
åç«¯è¿”å›:
{ code: 200, data: { list: [...], total: 32 } }
         â†“
request.jså“åº”æ‹¦æˆªå™¨è§£åŒ…:
{ list: [...], total: 32, page: 1, pageSize: 20 }
         â†“
materialPrepApi.ts (ä¿®å¤å‰):
æ£€æŸ¥ response.data.list âŒ (ä¸å­˜åœ¨ï¼Œå› ä¸ºå·²è¢«è§£åŒ…)
è¿”å› response.data âŒ (undefined)
         â†“
useMaterialPrepList.ts:
tableData.value = data.records || [] âŒ (recordsä¸å­˜åœ¨)
ç»“æœ: tableData = [] (ç©ºæ•°ç»„)
         â†“
MaterialPreparationPlanNew.vue:
è¿‡æ»¤é€»è¾‘: 0æ¡æ•°æ® â†’ æ˜¾ç¤ºç©ºç™½
```

### ä¿®å¤åçš„æ•°æ®æµï¼š

```
åç«¯è¿”å›:
{ code: 200, data: { list: [...], total: 32 } }
         â†“
request.jså“åº”æ‹¦æˆªå™¨è§£åŒ…:
{ list: [...], total: 32, page: 1, pageSize: 20 }
         â†“
materialPrepApi.ts (ä¿®å¤å):
æ£€æŸ¥ response.list âœ… (å­˜åœ¨)
è½¬æ¢: { records: response.list, total: 32 } âœ…
         â†“
useMaterialPrepList.ts:
tableData.value = data.records âœ… (20æ¡æ•°æ®)
         â†“
MaterialPreparationPlanNew.vue:
è¿‡æ»¤é€»è¾‘: 20æ¡æ•°æ® â†’ æ­£å¸¸æ˜¾ç¤º âœ…
```

## ğŸ”§ ä¿®å¤å†…å®¹

**æ–‡ä»¶**: `07-frontend/src/features/material-preparation/services/materialPrepApi.ts`

**ä¿®å¤é€»è¾‘**:
```typescript
// âŒ ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰
if (response.data && response.data.list) {  // ä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºrequest.jså·²è§£åŒ…
  return { records: response.data.list, total: response.data.total }
}

// âœ… ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰
if (response.list) {  // âœ… ç›´æ¥æ£€æŸ¥response.list
  return { records: response.list, total: response.total }
}
```

## ğŸ“ éªŒè¯æ­¥éª¤

### æ–¹å¼1: ç¡¬åˆ·æ–°é¡µé¢ï¼ˆæ¨èï¼‰

1. åœ¨æµè§ˆå™¨å¤‡æ–™è®¡åˆ’é¡µé¢æŒ‰ **Ctrl + Shift + R**ï¼ˆç¡¬åˆ·æ–°ï¼‰
2. æˆ–æ¸…é™¤ç¼“å­˜ï¼š**Ctrl + Shift + Delete** â†’ å‹¾é€‰"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶" â†’ æ¸…é™¤

### æ–¹å¼2: é‡æ–°ç¼–è¯‘å‰ç«¯

```bash
# å¦‚æœç¡¬åˆ·æ–°æ— æ•ˆï¼Œé‡å¯å‰ç«¯æœåŠ¡
cd /home/sardensy/enterprise-brain/enterpise-brain/07-frontend

# åœæ­¢å½“å‰æœåŠ¡ (Ctrl+C)
# é‡æ–°å¯åŠ¨
npm run dev
```

### æ–¹å¼3: æ¸…é™¤localStorage

åœ¨æµè§ˆå™¨Consoleæ‰§è¡Œï¼š
```javascript
localStorage.clear()
location.reload()
```

## âœ… æœŸæœ›ç»“æœ

åˆ·æ–°é¡µé¢åï¼Œåº”è¯¥çœ‹åˆ°ï¼š

### Consoleæ—¥å¿—ï¼š
```
ğŸ” APIåŸå§‹å“åº”: { list: Array(20), total: 32, page: 1, pageSize: 20 }
âœ… è½¬æ¢æ•°æ®æ ¼å¼: list â†’ records
ğŸ“‹ å¤‡æ–™è®¡åˆ’APIå“åº”: { records: Array(20), total: 32 }
ğŸ”§ è¿‡æ»¤åçš„æœ‰æ•ˆæ•°æ®: 20 æ¡ (åŸå§‹: 20 æ¡)  â† è¿™é‡Œåº”è¯¥æ˜¯20ï¼Œä¸æ˜¯0
âœ… æ•°æ®åŠ è½½æˆåŠŸï¼Œå…±20æ¡è®°å½•
```

### é¡µé¢æ˜¾ç¤ºï¼š
- âœ… è¡¨æ ¼æ˜¾ç¤º **20æ¡** å¤‡æ–™è®¡åˆ’æ•°æ®
- âœ… åˆ†é¡µæ˜¾ç¤º"å…± **32æ¡** è®°å½•"
- âœ… æ¯æ¡è®°å½•å®Œæ•´æ˜¾ç¤ºæ‰€æœ‰å­—æ®µ

## ğŸ” éªŒè¯æ¸…å•

- [ ] åˆ·æ–°é¡µé¢ï¼ˆCtrl + Shift + Rï¼‰
- [ ] Consoleæ˜¾ç¤º"è½¬æ¢æ•°æ®æ ¼å¼: list â†’ records"
- [ ] Consoleæ˜¾ç¤º"è¿‡æ»¤åçš„æœ‰æ•ˆæ•°æ®: 20 æ¡"
- [ ] è¡¨æ ¼æ˜¾ç¤ºæ•°æ®
- [ ] åˆ†é¡µæ˜¾ç¤ºæ­£ç¡®
- [ ] æ— é”™è¯¯æç¤º

## ğŸ¯ ä¸‹ä¸€æ­¥

éªŒè¯æˆåŠŸåï¼Œæµ‹è¯•å®Œæ•´å·¥ä½œæµï¼š

1. **æ‰§è¡Œä¸»ç”Ÿäº§è®¡åˆ’æ’ç¨‹**
   - å¯¼èˆªåˆ°ä¸»ç”Ÿäº§è®¡åˆ’é¡µé¢
   - é€‰æ‹©ä¸€æ¡è®¡åˆ’
   - ç‚¹å‡»"æ‰§è¡Œæ’ç¨‹"
   - åº”è¯¥æˆåŠŸç”Ÿæˆå¤‡æ–™è®¡åˆ’

2. **æŸ¥çœ‹æ–°å¢çš„å¤‡æ–™è®¡åˆ’**
   - åˆ‡æ¢åˆ°å¤‡æ–™è®¡åˆ’é¡µé¢
   - ç‚¹å‡»åˆ·æ–°
   - éªŒè¯æ–°å¢æ•°æ®

3. **éªŒè¯é‡‡è´­è®¡åˆ’æ¨é€**
   - å¦‚æœå¤‡æ–™è®¡åˆ’çš„æ¥æºå·¥åº=é‡‡è´­
   - åº”è¯¥è‡ªåŠ¨æ¨é€åˆ°é‡‡è´­è®¡åˆ’
   - å¯¼èˆªåˆ°é‡‡è´­è®¡åˆ’é¡µé¢éªŒè¯

## ğŸ“Š æŠ€æœ¯æ€»ç»“

**æ ¸å¿ƒé—®é¢˜**: 
- APIè¿”å›æ ¼å¼è½¬æ¢é€»è¾‘é”™è¯¯
- æœªæ­£ç¡®å¤„ç†request.jsçš„å“åº”è§£åŒ…

**è§£å†³æ–¹æ¡ˆ**: 
- ä¼˜å…ˆæ£€æŸ¥ `response.list`ï¼ˆå·²è§£åŒ…æ ¼å¼ï¼‰
- å†æ£€æŸ¥ `response.data.list`ï¼ˆæœªè§£åŒ…æ ¼å¼ï¼‰
- ç¡®ä¿å…¼å®¹å¤šç§å“åº”æ ¼å¼

**å…³é”®ç‚¹**:
- `request.js` çš„å“åº”æ‹¦æˆªå™¨ä¼šè§£åŒ… `{ code: 200, data: {...} }` â†’ `{...}`
- æ‰€æœ‰APIå±‚éƒ½éœ€è¦é€‚é…è¿™ä¸ªè§£åŒ…è¡Œä¸º
- ä¼˜å…ˆæ£€æŸ¥è§£åŒ…åçš„å­—æ®µï¼ˆ`response.list`ï¼‰

---

**ç°åœ¨è¯·åˆ·æ–°é¡µé¢éªŒè¯ï¼** ğŸš€
